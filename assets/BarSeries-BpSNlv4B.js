import{r as S}from"./index-CTzypqlY.js";import{d as A,i as x}from"./StackedBarSeries-NufmFq2n.js";import{g as V}from"./group-CTbjIu5X.js";import{h as b,f,G as q,b as R}from"./withSize-Bqu-aQP_.js";import{p as _}from"./barWidth-H00B5QnB.js";const m=class m extends S.Component{constructor(){super(...arguments),this.drawOnCanvas=(t,n)=>{if(this.props.swapScales){const{xAccessor:i}=n;A(t,this.props,n,i,x)}else{const i=this.getBars(n),{strokeStyle:s}=this.props;V(i,a=>a.fillStyle).forEach((a,o)=>{s!==void 0&&b(a).width>1&&(t.strokeStyle=s),t.fillStyle=o,a.forEach(e=>{e.width<=1?t.fillRect(e.x-.5,e.y,1,e.height):(t.fillRect(e.x+.5,e.y+.5,e.width,e.height),s!==void 0&&t.strokeRect(e.x,e.y,e.width,e.height))})})}},this.getBars=t=>{const{baseAt:n,fillStyle:i,width:s,yAccessor:h}=this.props,{xScale:a,xAccessor:o,plotData:e,chartConfig:{yScale:c}}=t,g=f(i),w=f(n),y=.5*f(s)(this.props,{xScale:a,xAccessor:o,plotData:e});return e.map(r=>{const d=h(r);if(d===void 0)return;const v=o(r),C=a(v)-y;let p=c(d),l=w(a,c,r)-c(d);return l<0&&(p=p+l,l=-l),{x:C,y:Math.round(p),height:Math.round(l),width:y*2,fillStyle:g(r)}}).filter(r=>r!==void 0)}}render(){const{clip:t}=this.props;return S.createElement(q,{clip:t,canvasToDraw:R,canvasDraw:this.drawOnCanvas,drawOn:["pan"]})}};m.defaultProps={baseAt:(t,n)=>b(n.range()),clip:!0,fillStyle:"rgba(70, 130, 180, 0.5)",swapScales:!1,width:_,widthRatio:.8};let u=m;try{u.displayName="BarSeries",u.__docgenInfo={description:"A `BarSeries` component.",displayName:"BarSeries",props:{baseAt:{defaultValue:{value:`(
            xScale: ScaleContinuousNumeric<number, number>,
            yScale: ScaleContinuousNumeric<number, number> /* , d*/,
        ) => head(yScale.range())`},description:"",name:"baseAt",required:!1,type:{name:"number | ((xScale: ScaleContinuousNumeric<number, number, never> | ScaleTime<number, number, never>, yScale: ScaleContinuousNumeric<number, number, never>, d: [...], moreProps: any) => number) | undefined"}},clip:{defaultValue:{value:"true"},description:"",name:"clip",required:!1,type:{name:"boolean | undefined"}},fillStyle:{defaultValue:{value:"rgba(70, 130, 180, 0.5)"},description:"",name:"fillStyle",required:!1,type:{name:"string | ((data: any) => string) | undefined"}},strokeStyle:{defaultValue:null,description:"",name:"strokeStyle",required:!1,type:{name:"string | undefined"}},swapScales:{defaultValue:{value:"false"},description:"",name:"swapScales",required:!1,type:{name:"boolean | undefined"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number | ((props: { widthRatio: number; }, moreProps: any) => number) | undefined"}},widthRatio:{defaultValue:{value:"0.8"},description:"",name:"widthRatio",required:!1,type:{name:"number | undefined"}},yAccessor:{defaultValue:null,description:"",name:"yAccessor",required:!0,type:{name:"(data: any) => number | undefined"}}}}}catch{}export{u as B};
