import{r as g}from"./index-CTzypqlY.js";import{d as b,i as A}from"./StackedBarSeries-C1rjxMaO.js";import{g as B}from"./group-CTbjIu5X.js";import{h as w,f as p,G as v,b as W}from"./withSize-Bqu-aQP_.js";import{p as k}from"./barWidth-H00B5QnB.js";class D extends g.Component{constructor(){super(...arguments),this.drawOnCanvas=(e,r)=>{if(this.props.swapScales){const{xAccessor:i}=r;b(e,this.props,r,i,A)}else{const i=this.getBars(r),{strokeStyle:n}=this.props;B(i,s=>s.fillStyle).forEach((s,l)=>{n!==void 0&&w(s).width>1&&(e.strokeStyle=n),e.fillStyle=l,s.forEach(t=>{t.width<=1?e.fillRect(t.x-.5,t.y,1,t.height):(e.fillRect(t.x+.5,t.y+.5,t.width,t.height),n!==void 0&&e.strokeRect(t.x,t.y,t.width,t.height))})})}},this.getBars=e=>{const{baseAt:r,fillStyle:i,width:n,yAccessor:d}=this.props,{xScale:s,xAccessor:l,plotData:t,chartConfig:{yScale:h}}=e,S=p(i),m=p(r),u=.5*p(n)(this.props,{xScale:s,xAccessor:l,plotData:t});return t.map(a=>{const c=d(a);if(c===void 0)return;const x=l(a),C=s(x)-u;let f=h(c),o=m(s,h,a)-h(c);return o<0&&(f=f+o,o=-o),{x:C,y:Math.round(f),height:Math.round(o),width:u*2,fillStyle:S(a)}}).filter(a=>a!==void 0)}}render(){const{clip:e}=this.props;return g.createElement(v,{clip:e,canvasToDraw:W,canvasDraw:this.drawOnCanvas,drawOn:["pan"]})}}D.defaultProps={baseAt:(y,e)=>w(e.range()),clip:!0,fillStyle:"rgba(70, 130, 180, 0.5)",swapScales:!1,width:k,widthRatio:.8};export{D as B};
