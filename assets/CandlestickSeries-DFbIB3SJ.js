import{r as b}from"./index-CTzypqlY.js";import{g as C}from"./group-CTbjIu5X.js";import{f as p,G as V,b as q}from"./withSize-Bqu-aQP_.js";import{p as E}from"./barWidth-H00B5QnB.js";const f=class f extends b.Component{constructor(){super(...arguments),this.drawOnCanvas=(e,s)=>{const{candleStrokeWidth:r=f.defaultProps.candleStrokeWidth}=this.props,{xScale:l,chartConfig:{yScale:m},plotData:w,xAccessor:c}=s,d=this.getCandleData(c,l,m,w);C(d,a=>a.wick.stroke).forEach((a,i)=>{e.fillStyle=i,a.forEach(h=>{const n=h.wick;e.fillRect(n.x-.5,n.y1,1,n.y2-n.y1),e.fillRect(n.x-.5,n.y3,1,n.y4-n.y3)})}),C(d,a=>a.stroke,a=>a.fill).forEach((a,i)=>{i!=="none"&&(e.strokeStyle=i,e.lineWidth=r),a.forEach((h,n)=>{e.fillStyle=n,h.forEach(t=>{t.width<=1?e.fillRect(t.x-.5,t.y,1,t.height):t.height===0?e.fillRect(t.x-.5,t.y,t.width,1):(e.fillRect(t.x-.5,t.y,t.width,t.height),i!=="none"&&e.strokeRect(t.x,t.y,t.width,t.height))})})})},this.getCandleData=(e,s,r,l)=>{const{fill:m,stroke:w,yAccessor:c,wickStroke:d}=this.props,k=p(m),g=p(w),a=p(d),n=.5*p(this.props.width)(this.props,{xScale:s,xAccessor:e,plotData:l});return l.filter(t=>c(t)!==void 0).map(t=>{const o=c(t);if(o===void 0)return;const R=e(t),v=s(R),y=Math.round(r(Math.max(o.open,o.close))),S=Math.max(1,Math.round(Math.abs(r(o.open)-r(o.close))));return{x:v-n,y,wick:{stroke:a(o),x:v,y1:Math.round(r(o.high)),y2:y,y3:y+S,y4:Math.round(r(o.low))},height:S,width:n*2,fill:k(o),stroke:g(o),direction:o.close-o.open}}).filter(t=>t!==void 0)}}render(){const{clip:e}=this.props;return b.createElement(V,{clip:e,canvasDraw:this.drawOnCanvas,canvasToDraw:q,drawOn:["pan"]})}};f.defaultProps={candleStrokeWidth:.5,clip:!0,fill:e=>e.close>e.open?"#26a69a":"#ef5350",stroke:"none",wickStroke:e=>e.close>e.open?"#26a69a":"#ef5350",width:E,widthRatio:.8,yAccessor:e=>({open:e.open,high:e.high,low:e.low,close:e.close})};let u=f;try{u.displayName="CandlestickSeries",u.__docgenInfo={description:"",displayName:"CandlestickSeries",props:{candleStrokeWidth:{defaultValue:{value:"0.5"},description:"",name:"candleStrokeWidth",required:!1,type:{name:"number | undefined"}},clip:{defaultValue:{value:"true"},description:"",name:"clip",required:!1,type:{name:"boolean | undefined"}},fill:{defaultValue:{value:'(d: any) => (d.close > d.open ? "#26a69a" : "#ef5350")'},description:"",name:"fill",required:!1,type:{name:"string | ((data: any) => string) | undefined"}},stroke:{defaultValue:{value:"none"},description:"",name:"stroke",required:!1,type:{name:"string | ((data: any) => string) | undefined"}},wickStroke:{defaultValue:{value:'(d: any) => (d.close > d.open ? "#26a69a" : "#ef5350")'},description:"",name:"wickStroke",required:!1,type:{name:"string | ((data: any) => string) | undefined"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number | ((props: CandlestickSeriesProps, moreProps: any) => number) | undefined"}},widthRatio:{defaultValue:{value:"0.8"},description:"",name:"widthRatio",required:!1,type:{name:"number | undefined"}},yAccessor:{defaultValue:{value:"(d: any) => ({ open: d.open, high: d.high, low: d.low, close: d.close })"},description:"",name:"yAccessor",required:!1,type:{name:"(data: any) => { open: number; high: number; low: number; close: number; } | undefined"}}}}}catch{}export{u as C};
