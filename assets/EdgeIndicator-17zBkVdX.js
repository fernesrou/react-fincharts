import{r as U}from"./index-CTzypqlY.js";import{d as K}from"./MouseCoordinateY-B1fOyXbI.js";import{n as Q}from"./discontinuousTimeScaleProvider-DjLVsG-0.js";import{j as _,l as v,f as T,G as tt,b as nt}from"./withSize-Bqu-aQP_.js";function rt(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function N(t,n){if((r=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var r,e=t.slice(0,r);return[e.length>1?e[0]+e.slice(2):e,+t.slice(r+1)]}function et(t){return t=N(Math.abs(t)),t?t[1]:NaN}function it(t,n){return function(r,e){for(var o=r.length,s=[],h=0,u=t[0],p=0;o>0&&u>0&&(p+u+1>e&&(u=Math.max(1,e-p)),s.push(r.substring(o-=u,o+u)),!((p+=u+1)>e));)u=t[h=(h+1)%t.length];return s.reverse().join(n)}}function ot(t){return function(n){return n.replace(/[0-9]/g,function(r){return t[+r]})}}var at=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function H(t){if(!(n=at.exec(t)))throw new Error("invalid format: "+t);var n;return new X({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}H.prototype=X.prototype;function X(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}X.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function st(t){t:for(var n=t.length,r=1,e=-1,o;r<n;++r)switch(t[r]){case".":e=o=r;break;case"0":e===0&&(e=r),o=r;break;default:if(!+t[r])break t;e>0&&(e=0);break}return e>0?t.slice(0,e)+t.slice(o+1):t}var B;function ft(t,n){var r=N(t,n);if(!r)return t+"";var e=r[0],o=r[1],s=o-(B=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,h=e.length;return s===h?e:s>h?e+new Array(s-h+1).join("0"):s>0?e.slice(0,s)+"."+e.slice(s):"0."+new Array(1-s).join("0")+N(t,Math.max(0,n+s-1))[0]}function V(t,n){var r=N(t,n);if(!r)return t+"";var e=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+e:e.length>o+1?e.slice(0,o+1)+"."+e.slice(o+1):e+new Array(o-e.length+2).join("0")}const I={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:rt,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>V(t*100,n),r:V,s:ft,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Y(t){return t}var Z=Array.prototype.map,q=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function dt(t){var n=t.grouping===void 0||t.thousands===void 0?Y:it(Z.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",e=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Y:ot(Z.call(t.numerals,String)),h=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"−":t.minus+"",p=t.nan===void 0?"NaN":t.nan+"";function P(a){a=H(a);var x=a.fill,w=a.align,c=a.sign,b=a.symbol,y=a.zero,M=a.width,k=a.comma,l=a.precision,C=a.trim,f=a.type;f==="n"?(k=!0,f="g"):I[f]||(l===void 0&&(l=12),C=!0,f="g"),(y||x==="0"&&w==="=")&&(y=!0,x="0",w="=");var $=b==="$"?r:b==="#"&&/[boxX]/.test(f)?"0"+f.toLowerCase():"",A=b==="$"?e:/[%p]/.test(f)?h:"",z=I[f],G=/[defgprs%]/.test(f);l=l===void 0?6:/[gprs]/.test(f)?Math.max(1,Math.min(21,l)):Math.max(0,Math.min(20,l));function F(i){var m=$,d=A,S,R,j;if(f==="c")d=z(i)+d,i="";else{i=+i;var E=i<0||1/i<0;if(i=isNaN(i)?p:z(Math.abs(i),l),C&&(i=st(i)),E&&+i==0&&c!=="+"&&(E=!1),m=(E?c==="("?c:u:c==="-"||c==="("?"":c)+m,d=(f==="s"?q[8+B/3]:"")+d+(E&&c==="("?")":""),G){for(S=-1,R=i.length;++S<R;)if(j=i.charCodeAt(S),48>j||j>57){d=(j===46?o+i.slice(S+1):i.slice(S))+d,i=i.slice(0,S);break}}}k&&!y&&(i=n(i,1/0));var O=m.length+i.length+d.length,g=O<M?new Array(M-O+1).join(x):"";switch(k&&y&&(i=n(g+i,g.length?M-d.length:1/0),g=""),w){case"<":i=m+i+d+g;break;case"=":i=m+g+i+d;break;case"^":i=g.slice(0,O=g.length>>1)+m+i+d+g.slice(O);break;default:i=g+m+i+d;break}return s(i)}return F.toString=function(){return a+""},F}function L(a,x){var w=P((a=H(a),a.type="f",a)),c=Math.max(-8,Math.min(8,Math.floor(et(x)/3)))*3,b=Math.pow(10,-c),y=q[8+c/3];return function(M){return w(b*M)+y}}return{format:P,formatPrefix:L}}var D,J;ht({thousands:",",grouping:[3],currency:["$",""]});function ht(t){return D=dt(t),J=D.format,D.formatPrefix,D}class W extends U.Component{constructor(){super(...arguments),this.drawOnCanvas=(n,r)=>{const e=this.helper(this.props,r);if(e===void 0)return;const o=Object.assign(Object.assign({},this.props),e);K(n,o)},this.helper=(n,r)=>{const{itemType:e,yAccessor:o}=n,{plotData:s}=r,h=e==="first"?_(s,o):v(s,o);return h!==void 0?this.getEdge(r,h):void 0},this.getEdge=(n,r)=>{const{fontFamily:e,fontSize:o,type:s,displayFormat:h=W.defaultProps.displayFormat,edgeAt:u,yAxisPad:p=W.defaultProps.yAxisPad,orient:P,lineStroke:L,yAccessor:a,fill:x,fullWidth:w,textFill:c,rectHeight:b,rectWidth:y,arrowWidth:M,stroke:k}=this.props,{xScale:l,chartConfig:{yScale:C},xAccessor:f,width:$}=n,A=a(r);if(A===void 0)return;const z=f(r),G=w?0:Math.round(l(z)),F=Math.round(C(A)),[i,m]=[0,$],d=u==="left"?i-p:m+p;return{coordinate:h(A),show:!0,type:s,orient:P,edgeAt:d,fill:T(x)(r),lineStroke:T(L)(r),stroke:T(k)(r),fontFamily:e,fontSize:o,textFill:T(c)(r),rectHeight:b,rectWidth:y,arrowWidth:M,x1:G,y1:F,x2:m,y2:F}}}render(){return U.createElement(tt,{edgeClip:!0,clip:!1,canvasDraw:this.drawOnCanvas,canvasToDraw:nt,drawOn:["pan"]})}}W.defaultProps={fitToText:!1,lineStroke:"#000000",lineOpacity:1,lineStrokeDasharray:"ShortDot",orient:"right",displayFormat:J(".2f"),edgeAt:"right",yAxisPad:0,rectHeight:20,rectWidth:50,arrowWidth:0,fontFamily:"-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif",fontSize:13,dx:0,hideLine:!1,fill:"#8a8a8a",opacity:1,stroke:Q,strokeOpacity:1,strokeWidth:1,textFill:"#FFFFFF",type:"horizontal"};export{W as E};
