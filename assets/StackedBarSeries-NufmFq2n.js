import{r as A}from"./index-CTzypqlY.js";import{g as I}from"./group-CTbjIu5X.js";import{m as W,a as F}from"./StackedBarSeries-C1rjxMaO.js";import{i as O,h as P,f as _,G,b as T}from"./withSize-Bqu-aQP_.js";import{p as $}from"./barWidth-H00B5QnB.js";const V=class V extends A.Component{constructor(){super(...arguments),this.drawOnCanvas=(e,t)=>{const{xAccessor:i}=t;L(e,this.props,t,i,F)}}render(){const{clip:e}=this.props;return A.createElement(G,{clip:e,canvasDraw:this.drawOnCanvas,canvasToDraw:T,drawOn:["pan"]})}};V.defaultProps={baseAt:(e,t)=>P(t.range()),direction:"up",stroke:!1,fillStyle:"rgba(70, 130, 180, 0.5)",width:$,widthRatio:.8,clip:!0,swapScales:!1};let b=V;function H(){let a=[];function e(t){return a.map((u,s)=>{const o=t.map(n=>{const l=[0,n[u]];return l.data=n,l});return o.key=u,o.index=s,o})}return e.keys=function(t){return arguments.length?(a=t,e):a},e}function L(a,e,t,i,u,s=O,o=v){const{xScale:n,chartConfig:{yScale:l},plotData:c}=t,f=j(e,i,c,n,l,u,o,s);k(e,a,f)}function x(a){return Array.isArray(a)?a:[a]}const j=(a,e,t,i,u,s,o,n)=>{const{yAccessor:l,swapScales:c}=a,f=x(c?e:l);return q(a,c?l:e,f,c?u:i,c?i:u,t,s,c?o:n)},v=a=>a.map(e=>({...e,x:e.y,y:e.x,height:e.width,width:e.height})),k=(a,e,t)=>{const{stroke:i}=a;I(t,s=>s.fillStyle).forEach((s,o)=>{P(s).width>1&&o!==void 0&&(e.strokeStyle=o),e.fillStyle=o,s.forEach(n=>{n.width<=1?e.fillRect(n.x-.5,n.y,1,n.height):(e.fillRect(n.x+.5,n.y+.5,n.width,n.height),i&&e.strokeRect(n.x,n.y,n.width,n.height))})})};function q(a,e,t,i,u,s,o=H,n=O){const{baseAt:l,fillStyle:c,stroke:f,spaceBetweenBar:w=0}=a,g=_(c),B=_(l),h=_(a.width)(a,{xScale:i,xAccessor:e,plotData:s}),S=Math.round(h),C=(S-w*(t.length-1))/t.length,N=S===1?0:.5*h,X=s.map(r=>{const d={appearance:{},x:e(r)};return t.forEach((p,m)=>{const y=`y${m}`;d[y]=p(r);const D={stroke:f?g(r,m):"none",fillStyle:g(r,m)};d.appearance[y]=D}),d}),Y=t.map((r,d)=>`y${d}`),E=o().keys(Y)(X).map((r,d)=>{const p=r.key;return r.map(m=>{const y=[m[0],m[1]];return y.data={x:m.data.x,i:d,appearance:m.data.appearance[p]},y})}),M=W(E).map(r=>{let d=u(r[1]),p=B(i,u,r.data)-u(r[1]-r[0]);return p<0&&(d=d+p,p=-p),{...r.data.appearance,x:Math.round(i(r.data.x)-h/2),y:d,groupOffset:Math.round(N-(r.data.i>0?(C+w)*r.data.i:0)),groupWidth:Math.round(C),offset:Math.round(N),height:p,width:S}}).filter(r=>!isNaN(r.y));return n(M)}try{q.displayName="getBars",q.__docgenInfo={description:"",displayName:"getBars",props:{baseAt:{defaultValue:null,description:"",name:"baseAt",required:!1,type:{name:"number | ((xScale: ScaleContinuousNumeric<number, number, never>, yScale: ScaleContinuousNumeric<number, number, never>, d: [...], moreProps: any) => number) | undefined"}},clip:{defaultValue:null,description:"",name:"clip",required:!1,type:{name:"boolean | undefined"}},direction:{defaultValue:null,description:"",name:"direction",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"up"'},{value:'"down"'}]}},fillStyle:{defaultValue:null,description:"",name:"fillStyle",required:!1,type:{name:"string | ((data: any, y: number) => string) | undefined"}},spaceBetweenBar:{defaultValue:null,description:"",name:"spaceBetweenBar",required:!1,type:{name:"number | undefined"}},stroke:{defaultValue:null,description:"",name:"stroke",required:!1,type:{name:"boolean | undefined"}},swapScales:{defaultValue:null,description:"",name:"swapScales",required:!1,type:{name:"boolean | undefined"}},yAccessor:{defaultValue:null,description:"",name:"yAccessor",required:!0,type:{name:"((data: any) => number | undefined) | ((d: any) => number)[]"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number | ((props: StackedBarSeriesProps, moreProps: any) => number) | undefined"}},widthRatio:{defaultValue:null,description:"",name:"widthRatio",required:!1,type:{name:"number | undefined"}}}}}catch{}try{b.displayName="StackedBarSeries",b.__docgenInfo={description:"",displayName:"StackedBarSeries",props:{baseAt:{defaultValue:{value:`(xScale: ScaleContinuousNumeric<number, number>, yScale: ScaleContinuousNumeric<number, number>) =>
            head(yScale.range())`},description:"",name:"baseAt",required:!1,type:{name:"number | ((xScale: ScaleContinuousNumeric<number, number, never>, yScale: ScaleContinuousNumeric<number, number, never>, d: [...], moreProps: any) => number) | undefined"}},clip:{defaultValue:{value:"true"},description:"",name:"clip",required:!1,type:{name:"boolean | undefined"}},direction:{defaultValue:{value:"up"},description:"",name:"direction",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"up"'},{value:'"down"'}]}},fillStyle:{defaultValue:{value:"rgba(70, 130, 180, 0.5)"},description:"",name:"fillStyle",required:!1,type:{name:"string | ((data: any, y: number) => string) | undefined"}},spaceBetweenBar:{defaultValue:null,description:"",name:"spaceBetweenBar",required:!1,type:{name:"number | undefined"}},stroke:{defaultValue:{value:"false"},description:"",name:"stroke",required:!1,type:{name:"boolean | undefined"}},swapScales:{defaultValue:{value:"false"},description:"",name:"swapScales",required:!1,type:{name:"boolean | undefined"}},yAccessor:{defaultValue:null,description:"",name:"yAccessor",required:!0,type:{name:"((data: any) => number | undefined) | ((d: any) => number)[]"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number | ((props: StackedBarSeriesProps, moreProps: any) => number) | undefined"}},widthRatio:{defaultValue:{value:"0.8"},description:"",name:"widthRatio",required:!1,type:{name:"number | undefined"}}}}}catch{}try{v.displayName="rotateXY",v.__docgenInfo={description:"",displayName:"rotateXY",props:{}}}catch{}try{k.displayName="drawOnCanvas2",k.__docgenInfo={description:"",displayName:"drawOnCanvas2",props:{stroke:{defaultValue:null,description:"",name:"stroke",required:!1,type:{name:"boolean | undefined"}}}}}catch{}export{k as a,L as d,H as i};
