import{_ as V,f as I,$ as _,a0 as P,a1 as W,t as C}from"./withSize-Bqu-aQP_.js";const N=()=>{};function b(){let t,e=10,n=N,a,o,u=0,i;const s=r=>{const c=o||V(a),l=I(e).apply(this,arguments),d=r.slice(u,l+u).map(c);let F=0;const y=I(t);return r.map((h,f)=>f<u+l-1?y(c(h),f,i):(f>=u+l&&(d.shift(),d.push(c(h,f))),n(d,f,F++,i)))};return s.undefinedValue=function(r){return arguments.length?(t=r,s):t},s.windowSize=function(r){return arguments.length?(e=r,s):e},s.misc=function(r){return arguments.length?(i=r,s):i},s.accumulator=function(r){return arguments.length?(n=r,s):n},s.skipInitial=function(r){return arguments.length?(u=r,s):u},s.sourcePath=function(r){return arguments.length?(a=r,s):a},s.source=function(r){return arguments.length?(o=r,s):o},s}function q(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}const R={yearFormat:"%Y",quarterFormat:"%b",monthFormat:"%b",weekFormat:"%e",dayFormat:"%e",hourFormat:"%H:%M",minuteFormat:"%H:%M",secondFormat:"%H:%M:%S",milliSecondFormat:".%L"},S=[(t,e,n)=>t.startOfYear&&e.getFullYear()%12===0&&"yearFormat",(t,e,n)=>t.startOfYear&&e.getFullYear()%4===0&&"yearFormat",(t,e,n)=>t.startOfYear&&e.getFullYear()%2===0&&"yearFormat",(t,e,n)=>t.startOfYear&&"yearFormat",(t,e,n)=>t.startOfQuarter&&"quarterFormat",(t,e,n)=>t.startOfMonth&&"monthFormat",(t,e,n)=>t.startOfWeek&&"weekFormat",(t,e,n)=>t.startOfDay&&n%2===0&&"dayFormat",(t,e,n)=>t.startOfDay&&"dayFormat",(t,e,n)=>t.startOfHalfDay&&"hourFormat",(t,e,n)=>t.startOfQuarterDay&&"hourFormat",(t,e,n)=>t.startOfEighthOfADay&&"hourFormat",(t,e,n)=>t.startOfHour&&e.getHours()%2===0&&"hourFormat",(t,e,n)=>t.startOfHour&&"hourFormat",(t,e,n)=>t.startOf30Minutes&&"minuteFormat",(t,e,n)=>t.startOf15Minutes&&"minuteFormat",(t,e,n)=>t.startOf5Minutes&&"minuteFormat",(t,e,n)=>t.startOfMinute&&"minuteFormat",(t,e,n)=>t.startOf30Seconds&&"secondFormat",(t,e,n)=>t.startOf15Seconds&&"secondFormat",(t,e,n)=>t.startOf5Seconds&&"secondFormat",(t,e,n)=>t.startOfSecond&&"secondFormat",(t,e,n)=>"milliSecondFormat"],D=S.length-1;function Y(t,e=_()){if(t===void 0)throw new Error("Use the discontinuousTimeScaleProvider to create financeDiscontinuousScale");function n(a){return e(a)}return n.invert=a=>{const o=e.invert(a);return Math.round(o*1e4)/1e4},n.domain=a=>a===void 0?e.domain():(e.domain(a),n),n.range=a=>a===void 0?e.range():(e.range(a),n),n.rangeRound=a=>e.rangeRound(a),n.clamp=a=>a===void 0?e.clamp():(e.clamp(a),n),n.interpolate=a=>a===void 0?e.interpolate():(e.interpolate(a),n),n.ticks=a=>{var o,u,i;const s=e.ticks(a),r=new Map,[c,l]=e.domain(),d=Math.ceil(c),F=(o=t[0])===null||o===void 0?void 0:o.index,y=Math.max(d,F)+Math.abs(F),h=Math.min(Math.floor(l),(u=t[t.length-1])===null||u===void 0?void 0:u.index)+Math.abs(F),f=Math.ceil((h-y)/(l-c)*s.length);for(let m=D;m>=0;m--){const O=r.get(m),p=O===void 0?[]:O.slice();for(let x=y;x<=h;x++)t[x].level===m&&p.push(t[x]);r.set(m,p)}let v=[];for(let m=D;m>=0;m--){const O=(i=r.get(m))!==null&&i!==void 0?i:[];if(O.length+v.length>f*1.5)break;v=v.concat(O.map(p=>p.index))}const g=v.sort(q);if(h-y>g.length){const m=new Set(g),O=Math.abs(t[0].index),p=Math.ceil((s.length>0?(s[s.length-1]-s[0])/s.length/4:1)*1.5);for(let M=0;M<g.length-1;M++)for(let w=M+1;w<g.length;w++)g[w]-g[M]<=p&&m.delete(t[g[M]+O].level>=t[g[w]+O].level?g[w]:g[M]);return[...m.values()].map(M=>parseInt(M,10))}return g},n.tickFormat=()=>function(a){const o=Math.abs(t[0].index),{format:u,date:i}=t[Math.floor(a+o)];return u(i)},n.value=a=>{const o=Math.abs(t[0].index),u=t[Math.floor(a+o)];if(u!==void 0){const{date:i}=u;return i}},n.nice=a=>(e.nice(a),n),n.index=a=>a===void 0?t:(t=a,n),n.copy=()=>Y(t,e.copy()),n}const j=(t,e,n,a)=>S.map((o,u)=>({level:S.length-u-1,format:a[o(t,e,n)]})).find(o=>!!o.format),X=b().windowSize(2).undefinedValue((t,e,{initialIndex:n,formatters:a})=>{const o=n,u={date:t.getTime(),startOfSecond:!1,startOf5Seconds:!1,startOf15Seconds:!1,startOf30Seconds:!1,startOfMinute:!1,startOf5Minutes:!1,startOf15Minutes:!1,startOf30Minutes:!1,startOfHour:!1,startOfEighthOfADay:!1,startOfQuarterDay:!1,startOfHalfDay:!1,startOfDay:!0,startOfWeek:!1,startOfMonth:!1,startOfQuarter:!1,startOfYear:!1},i=j(u,t,o,a);return Object.assign(Object.assign(Object.assign({},u),{index:o}),i)}),B=X.accumulator(([t,e],n,a,{initialIndex:o,formatters:u})=>{const i=e.getSeconds(),s=e.getMinutes(),r=e.getHours(),c=e.getDay(),l=e.getMonth(),d=i!==t.getSeconds(),F=d&&i%5===0,y=d&&i%15===0,h=d&&i%30===0,f=s!==t.getMinutes(),v=f&&s%5<=t.getMinutes()%5,g=f&&s%15<=t.getMinutes()%15,m=f&&s%30<=t.getMinutes()%30,O=r!==t.getHours(),p=O&&r%3===0,x=O&&r%6===0,M=O&&r%12===0,w=c!==t.getDay(),k=c<t.getDay(),H=l!==t.getMonth(),E=H&&l%3<=t.getMonth()%3,z=e.getFullYear()!==t.getFullYear(),A={date:e.getTime(),startOfSecond:d,startOf5Seconds:F,startOf15Seconds:y,startOf30Seconds:h,startOfMinute:f,startOf5Minutes:v,startOf15Minutes:g,startOf30Minutes:m,startOfHour:O,startOfEighthOfADay:p,startOfQuarterDay:x,startOfHalfDay:M,startOfDay:w,startOfWeek:k,startOfMonth:H,startOfQuarter:E,startOfYear:z},Q=j(A,e,n,u);return Object.assign(Object.assign(Object.assign({},A),{index:n+o}),Q)});function T(t,e,n,a){return function(o){const u=t(e);return{index:B.source(u).misc({initialIndex:n,formatters:a})(o).map(r=>{const{format:c}=r;return{index:r.index,level:r.level,date:new Date(r.date),format:C(c)}})}}}function U(){let t=0,e=r=>r,n=r=>r.date,a=r=>r.idx,o=(r,c)=>Object.assign(Object.assign({},r),{idx:c}),u,i=R;const s=function(r){let c=u;c===void 0&&(c=T(e,n,t,i)(r).index);const l=c,d=Y(l);return{data:W().combine(o)(r,l),xScale:d,xAccessor:h=>{var f;return h&&((f=a(h))===null||f===void 0?void 0:f.index)},displayXAccessor:e(n)}};return s.initialIndex=function(r){return arguments.length?(t=r,s):t},s.inputDateAccessor=function(r){return arguments.length?(n=r,s):n},s.indexAccessor=function(r){return arguments.length?(a=r,s):a},s.indexMutator=function(r){return arguments.length?(o=r,s):o},s.withIndex=function(r){return arguments.length?(u=r,s):u},s.utc=()=>(e=r=>c=>{const l=r(c),d=l.getTimezoneOffset()*60*1e3;return new Date(l.getTime()+d)},s),s.setLocale=(r,c)=>(r!==void 0&&P(r),c!==void 0&&(i=c),s),s.indexCalculator=function(){return T(e,n,t,i)},s}U();export{U as d,N as n};
