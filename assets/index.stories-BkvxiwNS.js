import{r as o}from"./index-CTzypqlY.js";import{f as h,e as N,C as T,w as E,m as P,n as F,o as z,X as L,Y as M}from"./withSize-Bqu-aQP_.js";import{w as O}from"./withOHLCData-BEr55ucm.js";import{d as W}from"./discontinuousTimeScaleProvider-DjLVsG-0.js";import{e as $}from"./ema-CshB59i3.js";import{L as I}from"./LineSeries-5eeGgUw4.js";import"./jsx-runtime-D_zvdyIk.js";import"./baseIndicator-qdS_KWkb.js";import"./index-kspPnZk0.js";import"./ema-YsYnLjx4.js";import"./defaultOptionsForComputation-CN7nWbKN.js";import"./path-uFnBsLuY.js";import"./merge-WqXt2Bz7.js";import"./array-2GBN5xbU.js";let q=class extends o.Component{constructor(){super(...arguments),this.drawOnCanvas=(e,a)=>{e.save();const{textAlign:s="center",fontFamily:i,fontSize:y,fontWeight:c,rotate:t}=this.props,{margin:u,ratio:n}=this.context;e.setTransform(1,0,0,1,0,0),e.scale(n,n),e.translate(u.left+.5*n,u.top+.5*n);const{xScale:d,chartConfig:r,xAccessor:m}=a,p=Array.isArray(r)||!r?void 0:r.yScale,{xPos:g,yPos:x,fillStyle:f,text:S}=this.helper(a,m,d,p);if(e.save(),e.translate(g,x),t!==void 0){const A=t/180*Math.PI;e.rotate(A)}i!==void 0&&(e.font=`${c} ${y}px ${i}`),f!==void 0&&(e.fillStyle=f),s!==void 0&&(e.textAlign=s),e.beginPath(),e.fillText(S,0,0),e.restore()},this.helper=(e,a,s,i)=>{const{x:y,y:c,datum:t,fillStyle:u,text:n}=this.props,{plotData:d}=e,r=h(y),m=h(c),[p,g]=[r({xScale:s,xAccessor:a,datum:t,plotData:d}),m({yScale:i,datum:t,plotData:d})];return{xPos:p,yPos:g,text:h(n)(t),fillStyle:h(u)(t)}}}render(){const{selectCanvas:e}=this.props;return o.createElement(N,{canvasToDraw:e,canvasDraw:this.drawOnCanvas,drawOn:["pan","zoom","mousemove","drag"]})}};q.defaultProps={fontFamily:"-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif",fontSize:64,fontWeight:"bold",fillStyle:"#dcdcdc",rotate:0,x:({xScale:l,xAccessor:e,datum:a})=>l(e(a)),selectCanvas:l=>l.bg};q.contextType=T;const C=class C extends o.Component{constructor(){super(...arguments),this.drawOnCanvas=(e,a)=>{e.save();const{textAlign:s="center",fontFamily:i,fontSize:y,fontWeight:c,rotate:t}=this.props,{margin:u,ratio:n}=this.context;e.setTransform(1,0,0,1,0,0),e.scale(n,n),e.translate(u.left+.5*n,u.top+.5*n);const{xScale:d,chartConfig:r,xAccessor:m}=a,p=Array.isArray(r)||!r?void 0:r.yScale,{xPos:g,yPos:x,fillStyle:f,text:S}=this.helper(a,m,d,p);if(e.save(),e.translate(g,x),t!==void 0){const A=t/180*Math.PI;e.rotate(A)}i!==void 0&&(e.font=`${c} ${y}px ${i}`),f!==void 0&&(e.fillStyle=f),s!==void 0&&(e.textAlign=s),e.beginPath(),e.fillText(S,0,0),e.restore()},this.helper=(e,a,s,i)=>{const{x:y,y:c,datum:t,fillStyle:u,text:n}=this.props,{plotData:d}=e,r=h(y),m=h(c),[p,g]=[r({xScale:s,xAccessor:a,datum:t,plotData:d}),m({yScale:i,datum:t,plotData:d})];return{xPos:p,yPos:g,text:h(n)(t),fillStyle:h(u)(t)}}}render(){const{selectCanvas:e}=this.props;return o.createElement(N,{canvasToDraw:e,canvasDraw:this.drawOnCanvas,drawOn:["pan","zoom","mousemove","drag"]})}};C.defaultProps={fontFamily:"-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif",fontSize:64,fontWeight:"bold",fillStyle:"#dcdcdc",rotate:0,x:({xScale:e,xAccessor:a,datum:s})=>e(a(s)),selectCanvas:e=>e.bg},C.contextType=T;let v=C;try{v.displayName="Label",v.__docgenInfo={description:"",displayName:"Label",props:{datum:{defaultValue:null,description:"",name:"datum",required:!1,type:{name:"any"}},fillStyle:{defaultValue:{value:"#dcdcdc"},description:"",name:"fillStyle",required:!1,type:{name:"string | ((datum: any) => string) | undefined"}},fontFamily:{defaultValue:{value:"-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif"},description:"",name:"fontFamily",required:!1,type:{name:"string | undefined"}},fontSize:{defaultValue:{value:"64"},description:"",name:"fontSize",required:!1,type:{name:"number | undefined"}},fontWeight:{defaultValue:{value:"bold"},description:"",name:"fontWeight",required:!1,type:{name:"string | undefined"}},rotate:{defaultValue:{value:"0"},description:"",name:"rotate",required:!1,type:{name:"number | undefined"}},selectCanvas:{defaultValue:{value:"(canvases: any) => canvases.bg"},description:"",name:"selectCanvas",required:!1,type:{name:"((canvases: any) => any) | undefined"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string | ((datum: any) => string) | undefined"}},textAlign:{defaultValue:null,description:"",name:"textAlign",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"center"'},{value:'"end"'},{value:'"left"'},{value:'"right"'},{value:'"start"'}]}},x:{defaultValue:{value:"({ xScale, xAccessor, datum }: any) => xScale(xAccessor(datum))"},description:"",name:"x",required:!1,type:{name:"number | ((xScale: ScaleContinuousNumeric<number, number, never>, xAccessor: any, datum: any, plotData: any[]) => number)"}},xAccessor:{defaultValue:null,description:"",name:"xAccessor",required:!1,type:{name:"((datum: any) => any) | undefined"}},xScale:{defaultValue:null,description:"",name:"xScale",required:!1,type:{name:"ScaleContinuousNumeric<number, number, never> | undefined"}},y:{defaultValue:null,description:"",name:"y",required:!0,type:{name:"number | ((yScale: ScaleContinuousNumeric<number, number, never>, datum: any, plotData: any[]) => number)"}},yScale:{defaultValue:null,description:"",name:"yScale",required:!1,type:{name:"ScaleContinuousNumeric<number, number, never> | undefined"}}}}}catch{}try{v.contextType.displayName="Label.contextType",v.contextType.__docgenInfo={description:`Context lets components pass information deep down without explicitly
passing props.

Created from {@link createContext}`,displayName:"Label.contextType",props:{}}}catch{}class _ extends o.Component{constructor(){super(...arguments),this.margin={left:0,right:48,top:0,bottom:24},this.xScaleProvider=W().inputDateAccessor(e=>e.date),this.yExtents=e=>[e.high,e.low]}render(){const{data:e,height:a,ratio:s,width:i,selectCanvas:y,...c}=this.props,t=$().id(1).options({windowSize:12}).merge((f,S)=>{f.ema12=S}).accessor(f=>f.ema12),u=t(e),{data:n,xScale:d,xAccessor:r,displayXAccessor:m}=this.xScaleProvider(u),p=r(n[n.length-1]),x=[r(n[Math.max(0,n.length-100)]),p];return o.createElement(F,{height:a,ratio:s,width:i,margin:this.margin,data:n,displayXAccessor:m,seriesName:"Data",xScale:d,xAccessor:r,xExtents:x},o.createElement(z,{id:1,yExtents:this.yExtents},o.createElement(L,{showGridLines:!0}),o.createElement(M,{showGridLines:!0}),o.createElement(q,{text:"MSFT",...c,x:(i-this.margin.left-this.margin.right)/2,y:(a-this.margin.top-this.margin.bottom)/2}),o.createElement(I,{yAccessor:t.accessor(),strokeStyle:t.stroke()})))}}const k=O()(E()(P()(_)));try{_.displayName="Annotations",_.__docgenInfo={description:"",displayName:"Annotations",props:{fillStyle:{defaultValue:null,description:"",name:"fillStyle",required:!1,type:{name:"string | ((datum: any) => string) | undefined"}},datum:{defaultValue:null,description:"",name:"datum",required:!1,type:{name:"any"}},fontFamily:{defaultValue:null,description:"",name:"fontFamily",required:!1,type:{name:"string | undefined"}},fontSize:{defaultValue:null,description:"",name:"fontSize",required:!1,type:{name:"number | undefined"}},fontWeight:{defaultValue:null,description:"",name:"fontWeight",required:!1,type:{name:"string | undefined"}},rotate:{defaultValue:null,description:"",name:"rotate",required:!1,type:{name:"number | undefined"}},selectCanvas:{defaultValue:null,description:"",name:"selectCanvas",required:!1,type:{name:"((canvases: any) => any) | undefined"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string | ((datum: any) => string) | undefined"}},textAlign:{defaultValue:null,description:"",name:"textAlign",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"center"'},{value:'"end"'},{value:'"left"'},{value:'"right"'},{value:'"start"'}]}},x:{defaultValue:null,description:"",name:"x",required:!1,type:{name:"number | ((xScale: ScaleContinuousNumeric<number, number, never>, xAccessor: any, datum: any, plotData: any[]) => number) | undefined"}},xAccessor:{defaultValue:null,description:"",name:"xAccessor",required:!1,type:{name:"((datum: any) => any) | undefined"}},xScale:{defaultValue:null,description:"",name:"xScale",required:!1,type:{name:"ScaleContinuousNumeric<number, number, never> | undefined"}},y:{defaultValue:null,description:"",name:"y",required:!1,type:{name:"number | ((yScale: ScaleContinuousNumeric<number, number, never>, datum: any, plotData: any[]) => number) | undefined"}},yScale:{defaultValue:null,description:"",name:"yScale",required:!1,type:{name:"ScaleContinuousNumeric<number, number, never> | undefined"}}}}}catch{}try{componentDidMount.displayName="componentDidMount",componentDidMount.__docgenInfo={description:"Called immediately after a component is mounted. Setting state here will trigger re-rendering.",displayName:"componentDidMount",props:{}}}catch{}const re={component:v,title:"Features/Annotations",argTypes:{fillStyle:{control:"color"},text:{control:{type:"text"}}}},H=l=>o.createElement(k,{...l}),b=H.bind({});var V,w,D;b.parameters={...b.parameters,docs:{...(V=b.parameters)==null?void 0:V.docs,source:{originalSource:"args => <Annotations {...args} />",...(D=(w=b.parameters)==null?void 0:w.docs)==null?void 0:D.source}}};const se=["background"];export{se as __namedExportsOrder,b as background,re as default};
