import{r as t}from"./index-CTzypqlY.js";import{a as T}from"./StackedBarSeries-NufmFq2n.js";import{m as F}from"./StackedBarSeries-C1rjxMaO.js";import{f as A,j as O,G as $,b as X,w as z,m as G,n as H,o as Y,X as j,Y as W,a as E}from"./withSize-Bqu-aQP_.js";import{p as J}from"./barWidth-H00B5QnB.js";import{S as K}from"./StraightLine-CBnew9DE.js";import{w as Q}from"./withOHLCData-BEr55ucm.js";import{c as U}from"./change-BqrAuNKV.js";import{d as Z}from"./discontinuousTimeScaleProvider-DjLVsG-0.js";import{e as ee,E as re}from"./ElderRaySeries-BNmjGCcw.js";import{S as te}from"./SingleValueTooltip-CQ4GxCuA.js";import"./group-CTbjIu5X.js";import"./index-kspPnZk0.js";import"./array-2GBN5xbU.js";import"./jsx-runtime-D_zvdyIk.js";import"./baseIndicator-qdS_KWkb.js";import"./defaultOptionsForComputation-CN7nWbKN.js";import"./slidingWindow-Zblwndst.js";import"./functor-Bsi8uwFK.js";import"./path-uFnBsLuY.js";import"./merge-WqXt2Bz7.js";import"./ema-YsYnLjx4.js";import"./mean-DHO-D6Gx.js";import"./zip-Irq_DN6l.js";import"./StraightLine-BDDeJkOw.js";import"./ToolTipTSpanLabel-D8pipyNG.js";const V=class V extends t.Component{constructor(){super(...arguments),this.drawOnCanvas=(e,r)=>{const a=this.getBars(r);T(this.props,e,a)},this.getBars=e=>{const{xScale:r,xAccessor:a,chartConfig:{yScale:i},plotData:n}=e,{baseAt:y,fillStyle:S,stroke:s,yAccessor:v}=this.props,l=A(S),w=A(y),P=A(this.props.width)(this.props,e),f=Math.floor(.5*P),b=n.map(d=>{const c=v.map((o,_)=>{const q=o(d);if(q===void 0)return;const I=a(d),L=Math.round(r(I))-f,M=i(q);return{height:0,width:f*2,x:L,y:M,stroke:s?l(d,_):"none",fillStyle:l(d,_),i:_}}).filter(o=>o!==void 0);let D=w(r,i,d),m;for(let o=c.length-1;o>=0;o--)m=D-c[o].y,m<0&&(c[o].y=D,m=-1*m),c[o].height=m,D=c[o].y;return c});return F(b)}}render(){const{clip:e}=this.props;return t.createElement($,{canvasToDraw:X,canvasDraw:this.drawOnCanvas,clip:e,drawOn:["pan"]})}};V.defaultProps={baseAt:(e,r)=>O(r.range()),clip:!0,direction:"up",stroke:!1,fillStyle:"#4682B4",widthRatio:.5,width:J};let p=V;try{p.displayName="OverlayBarSeries",p.__docgenInfo={description:"",displayName:"OverlayBarSeries",props:{baseAt:{defaultValue:{value:`(xScale: ScaleContinuousNumeric<number, number>, yScale: ScaleContinuousNumeric<number, number>) =>
            first(yScale.range())`},description:"",name:"baseAt",required:!1,type:{name:"number | ((xScale: ScaleContinuousNumeric<number, number, never> | ScaleTime<number, number, never>, yScale: ScaleContinuousNumeric<number, number, never>, datum: any) => number) | undefined"}},direction:{defaultValue:{value:"up"},description:"",name:"direction",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"up"'},{value:'"down"'}]}},stroke:{defaultValue:{value:"false"},description:"",name:"stroke",required:!1,type:{name:"boolean | undefined"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"any"}},widthRatio:{defaultValue:{value:"0.5"},description:"",name:"widthRatio",required:!1,type:{name:"number | undefined"}},fillStyle:{defaultValue:{value:"#4682B4"},description:"",name:"fillStyle",required:!1,type:{name:"string | ((data: any, y: number) => string) | undefined"}},yAccessor:{defaultValue:null,description:"",name:"yAccessor",required:!0,type:{name:"((datum: any) => number | undefined)[]"}},xScale:{defaultValue:null,description:"",name:"xScale",required:!1,type:{name:"ScaleContinuousNumeric<number, number, never> | undefined"}},yScale:{defaultValue:null,description:"",name:"yScale",required:!1,type:{name:"ScaleContinuousNumeric<number, number, never> | undefined"}},plotData:{defaultValue:null,description:"",name:"plotData",required:!1,type:{name:"number[] | undefined"}},clip:{defaultValue:{value:"true"},description:"",name:"clip",required:!1,type:{name:"boolean | undefined"}}}}}catch{}const C=class C extends t.Component{constructor(){super(...arguments),this.yAccessorBullTop=e=>{const{yAccessor:r}=this.props;return r(e)&&(r(e).bullPower>0?r(e).bullPower:void 0)},this.yAccessorBearTop=e=>{const{yAccessor:r}=this.props;return r(e)&&(r(e).bearPower>0?r(e).bearPower:void 0)},this.yAccessorBullBottom=e=>{const{yAccessor:r}=this.props;return r(e)&&(r(e).bullPower<0?0:void 0)},this.yAccessorBearBottom=e=>{const{yAccessor:r}=this.props;return r(e)&&(r(e).bullPower<0||r(e).bullPower*r(e).bearPower<0?Math.min(0,r(e).bullPower):void 0)},this.yAccessorForBarBase=(e,r,a)=>{const{yAccessor:i}=this.props,n=i(a)&&Math.min(i(a).bearPower,0);return r(n)},this.fillForEachBar=(e,r)=>{const{fillStyle:a}=this.props;return r%2===0?a.bullPower:a.bearPower}}render(){const{className:e,clip:r,stroke:a,straightLineStrokeStyle:i,straightLineStrokeDasharray:n,widthRatio:y}=this.props;return t.createElement("g",{className:e},t.createElement(p,{baseAt:this.yAccessorForBarBase,stroke:a,fillStyle:this.fillForEachBar,widthRatio:y,clip:r,yAccessor:[this.yAccessorBullTop,this.yAccessorBearTop,this.yAccessorBullBottom,this.yAccessorBearBottom]}),t.createElement(K,{yValue:0,strokeStyle:i,lineDash:n}))}};C.defaultProps={fillStyle:{bearPower:"rgba(239, 83, 80, 0.7)",bullPower:"rgba(38, 166, 153, 0.7)"},className:"react-financial-charts-elderray-series",clip:!0,stroke:!0,straightLineStrokeStyle:"rgba(0, 0, 0, 0.7)",straightLineStrokeDasharray:"Dash",widthRatio:.8};let h=C;try{h.displayName="ElderRaySeries",h.__docgenInfo={description:`This indicator consists of three separate indicators
known as "bull power" and "bear power", which are derived from a 13-period
exponential moving average (EMA). The three indicator help traders determine
the trend direction and isolate spots to enter and exit trades.`,displayName:"ElderRaySeries",props:{fillStyle:{defaultValue:{value:`{
            bearPower: "rgba(239, 83, 80, 0.7)",
            bullPower: "rgba(38, 166, 153, 0.7)",
        }`},description:"",name:"fillStyle",required:!1,type:{name:"{ bearPower: string; bullPower: string; } | undefined"}},className:{defaultValue:{value:"react-financial-charts-elderray-series"},description:"",name:"className",required:!1,type:{name:"string | undefined"}},clip:{defaultValue:{value:"true"},description:"",name:"clip",required:!1,type:{name:"boolean | undefined"}},stroke:{defaultValue:{value:"true"},description:"",name:"stroke",required:!1,type:{name:"boolean | undefined"}},straightLineStrokeStyle:{defaultValue:{value:"rgba(0, 0, 0, 0.7)"},description:"",name:"straightLineStrokeStyle",required:!1,type:{name:"string | undefined"}},straightLineStrokeDasharray:{defaultValue:{value:"Dash"},description:"",name:"straightLineStrokeDasharray",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"Solid"'},{value:'"ShortDash"'},{value:'"ShortDash2"'},{value:'"ShortDot"'},{value:'"ShortDashDot"'},{value:'"ShortDashDotDot"'},{value:'"Dot"'},{value:'"Dash"'},{value:'"LongDash"'},{value:'"DashDot"'},{value:'"LongDashDot"'},{value:'"LongDashDotDot"'}]}},widthRatio:{defaultValue:{value:"0.8"},description:"",name:"widthRatio",required:!1,type:{name:"number | undefined"}},yAccessor:{defaultValue:null,description:"",name:"yAccessor",required:!0,type:{name:"(data: any) => { bearPower: number; bullPower: number; }"}}}}}catch{}class x extends t.Component{constructor(){super(...arguments),this.margin={left:0,right:48,top:8,bottom:24},this.xScaleProvider=Z().inputDateAccessor(e=>e.date)}render(){const{data:e,height:r,ratio:a,width:i}=this.props,n=ee(),S=U()(n(e)),{data:s,xScale:v,xAccessor:l,displayXAccessor:w}=this.xScaleProvider(S),B=l(s[s.length-1]),f=[l(s[Math.max(0,s.length-100)]),B];return t.createElement(H,{height:r,ratio:a,width:i,margin:this.margin,data:s,displayXAccessor:w,seriesName:"Data",xScale:v,xAccessor:l,xExtents:f},t.createElement(Y,{id:1,yExtents:[0,n.accessor()]},t.createElement(j,null),t.createElement(W,{ticks:4,tickFormat:E(".2f")}),t.createElement(re,{yAccessor:n.accessor()}),t.createElement(te,{yAccessor:n.accessor(),yLabel:"Elder Ray",yDisplayFormat:b=>`${E(".2f")(b.bullPower)}, ${E(".2f")(b.bearPower)}`,origin:[8,8]})))}}const ae=Q()(z()(G()(x)));try{x.displayName="ElderRayIndicatorChart",x.__docgenInfo={description:"",displayName:"ElderRayIndicatorChart",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"IOHLCData[]"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},ratio:{defaultValue:null,description:"",name:"ratio",required:!0,type:{name:"number"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}}}}}catch{}try{ElderRayIndicator.displayName="ElderRayIndicator",ElderRayIndicator.__docgenInfo={description:"",displayName:"ElderRayIndicator",props:{}}}catch{}try{componentDidMount.displayName="componentDidMount",componentDidMount.__docgenInfo={description:"Called immediately after a component is mounted. Setting state here will trigger re-rendering.",displayName:"componentDidMount",props:{}}}catch{}const Pe={title:"Visualization/Indicator/Elder Ray",component:h},g=()=>t.createElement(ae,null);var k,N,R;g.parameters={...g.parameters,docs:{...(k=g.parameters)==null?void 0:k.docs,source:{originalSource:"() => <ElderRayIndicator />",...(R=(N=g.parameters)==null?void 0:N.docs)==null?void 0:R.source}}};const qe=["basic"];export{qe as __namedExportsOrder,g as basic,Pe as default};
