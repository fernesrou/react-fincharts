import{r as h}from"./index-CTzypqlY.js";import{d as g,e as V,g as E,l as q,j as L,C as A,w as M,m as N,n as O,o as W,X as R,Y as $}from"./withSize-Bqu-aQP_.js";import{w as H}from"./withOHLCData-BEr55ucm.js";import{d as j}from"./discontinuousTimeScaleProvider-DjLVsG-0.js";import{C as z}from"./CurrentCoordinate-BMWnhbga.js";import{L as B}from"./LineSeries-5eeGgUw4.js";import{C as G}from"./CrossHairCursor-C6hnYaC-.js";import"./jsx-runtime-D_zvdyIk.js";import"./array-2GBN5xbU.js";const J=(m,e)=>{const{xScale:r,xAccessor:a,currentItem:l,mouseXY:o}=e,{snapX:s}=m;return s?Math.round(r(a(l))):o[0]};let X=class F extends h.Component{constructor(){super(...arguments),this.drawOnCanvas=(e,r)=>{const a=this.getXYCursor(this.props,r);if(a===void 0)return;const{useXCursorShape:l}=this.props,{margin:o,ratio:s}=this.context,i=.5*s+o.left,c=.5*s+o.top;e.save(),e.setTransform(1,0,0,1,0,0),e.scale(s,s),e.translate(i,c),a.forEach(t=>{if(l&&t.isXCursor){const{xCursorShapeStrokeDasharray:n}=this.props;if(n!==void 0){const p=this.getXCursorShapeStroke(r);p!==void 0&&(e.strokeStyle=p),e.setLineDash(g(n))}e.beginPath();const d=this.getXCursorShapeFill(r);d!==void 0&&(e.fillStyle=d),e.beginPath();const u=this.getXCursorShape(r);n===void 0?e.fillRect(u.xPos,0,u.shapeWidth,u.height):e.rect(u.xPos,0,u.shapeWidth,u.height),e.fill()}else{t.strokeStyle!==void 0&&(e.strokeStyle=t.strokeStyle);const n=g(t.strokeDasharray);e.setLineDash(n),e.beginPath(),e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2)}e.stroke()}),e.restore()}}render(){return h.createElement(V,{clip:!1,canvasDraw:this.drawOnCanvas,canvasToDraw:E,drawOn:["mousemove","pan","drag"]})}getXCursorShapeStroke({currentItem:e}){const{xCursorShapeStrokeStyle:r}=this.props;return r instanceof Function?r(e):r}getXCursorShapeFill({currentItem:e}){const{xCursorShapeFillStyle:r}=this.props;return r instanceof Function?r(e):r}getXCursorShape(e){const{height:r,xScale:a,currentItem:l,plotData:o}=e,{xAccessor:s}=e,i=s(l),c=a(i),t=Math.abs(a(s(q(o)))-a(s(L(o))))/(o.length-1),n=c-t/2;return{height:r,xPos:n,shapeWidth:t}}getXYCursor(e,r){const{mouseXY:a,currentItem:l,show:o,height:s,width:i}=r,{customX:c=F.defaultProps.customX,strokeStyle:t,strokeDasharray:n,disableYCursor:d}=e;if(!o||l===void 0)return;const u={x1:0,x2:i,y1:a[1]+.5,y2:a[1]+.5,strokeStyle:t,strokeDasharray:n,isXCursor:!1},p=c(e,r),y={x1:p,x2:p,y1:0,y2:s,strokeStyle:t,strokeDasharray:n,isXCursor:!0};return d?[y]:[u,y]}};X.defaultProps={strokeStyle:"rgba(55, 71, 79, 0.8)",strokeDasharray:"ShortDash",snapX:!0,customX:J,disableYCursor:!1,useXCursorShape:!1,xCursorShapeStrokeStyle:"rgba(0, 0, 0, 0.5)"};X.contextType=A;const K=(m,e)=>{const{xScale:r,xAccessor:a,currentItem:l,mouseXY:o}=e,{snapX:s}=m;return s?Math.round(r(a(l))):o[0]},f=class f extends h.Component{constructor(){super(...arguments),this.drawOnCanvas=(e,r)=>{const a=this.getXYCursor(this.props,r);if(a===void 0)return;const{useXCursorShape:l}=this.props,{margin:o,ratio:s}=this.context,i=.5*s+o.left,c=.5*s+o.top;e.save(),e.setTransform(1,0,0,1,0,0),e.scale(s,s),e.translate(i,c),a.forEach(t=>{if(l&&t.isXCursor){const{xCursorShapeStrokeDasharray:n}=this.props;if(n!==void 0){const p=this.getXCursorShapeStroke(r);p!==void 0&&(e.strokeStyle=p),e.setLineDash(g(n))}e.beginPath();const d=this.getXCursorShapeFill(r);d!==void 0&&(e.fillStyle=d),e.beginPath();const u=this.getXCursorShape(r);n===void 0?e.fillRect(u.xPos,0,u.shapeWidth,u.height):e.rect(u.xPos,0,u.shapeWidth,u.height),e.fill()}else{t.strokeStyle!==void 0&&(e.strokeStyle=t.strokeStyle);const n=g(t.strokeDasharray);e.setLineDash(n),e.beginPath(),e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2)}e.stroke()}),e.restore()}}render(){return h.createElement(V,{clip:!1,canvasDraw:this.drawOnCanvas,canvasToDraw:E,drawOn:["mousemove","pan","drag"]})}getXCursorShapeStroke({currentItem:e}){const{xCursorShapeStrokeStyle:r}=this.props;return r instanceof Function?r(e):r}getXCursorShapeFill({currentItem:e}){const{xCursorShapeFillStyle:r}=this.props;return r instanceof Function?r(e):r}getXCursorShape(e){const{height:r,xScale:a,currentItem:l,plotData:o}=e,{xAccessor:s}=e,i=s(l),c=a(i),t=Math.abs(a(s(q(o)))-a(s(L(o))))/(o.length-1),n=c-t/2;return{height:r,xPos:n,shapeWidth:t}}getXYCursor(e,r){const{mouseXY:a,currentItem:l,show:o,height:s,width:i}=r,{customX:c=f.defaultProps.customX,strokeStyle:t,strokeDasharray:n,disableYCursor:d}=e;if(!o||l===void 0)return;const u={x1:0,x2:i,y1:a[1]+.5,y2:a[1]+.5,strokeStyle:t,strokeDasharray:n,isXCursor:!1},p=c(e,r),y={x1:p,x2:p,y1:0,y2:s,strokeStyle:t,strokeDasharray:n,isXCursor:!0};return d?[y]:[u,y]}};f.defaultProps={strokeStyle:"rgba(55, 71, 79, 0.8)",strokeDasharray:"ShortDash",snapX:!0,customX:K,disableYCursor:!1,useXCursorShape:!1,xCursorShapeStrokeStyle:"rgba(0, 0, 0, 0.5)"},f.contextType=A;let S=f;try{S.displayName="Cursor",S.__docgenInfo={description:"",displayName:"Cursor",props:{customX:{defaultValue:{value:`(props: CursorProps, moreProps: any) => {
    const { xScale, xAccessor, currentItem, mouseXY } = moreProps;
    const { snapX } = props;
    const x = snapX ? Math.round(xScale(xAccessor(currentItem))) : mouseXY[0];
    return x;
}`},description:"",name:"customX",required:!1,type:{name:"((props: CursorProps, moreProps: any) => number) | undefined"}},disableYCursor:{defaultValue:{value:"false"},description:"",name:"disableYCursor",required:!1,type:{name:"boolean | undefined"}},snapX:{defaultValue:{value:"true"},description:"",name:"snapX",required:!1,type:{name:"boolean | undefined"}},strokeDasharray:{defaultValue:{value:"ShortDash"},description:"",name:"strokeDasharray",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"Solid"'},{value:'"ShortDash"'},{value:'"ShortDash2"'},{value:'"ShortDot"'},{value:'"ShortDashDot"'},{value:'"ShortDashDotDot"'},{value:'"Dot"'},{value:'"Dash"'},{value:'"LongDash"'},{value:'"DashDot"'},{value:'"LongDashDot"'},{value:'"LongDashDotDot"'}]}},strokeStyle:{defaultValue:{value:"rgba(55, 71, 79, 0.8)"},description:"",name:"strokeStyle",required:!1,type:{name:"string | undefined"}},useXCursorShape:{defaultValue:{value:"false"},description:"",name:"useXCursorShape",required:!1,type:{name:"boolean | undefined"}},xCursorShapeFillStyle:{defaultValue:null,description:"",name:"xCursorShapeFillStyle",required:!1,type:{name:"string | ((currentItem: any) => string) | undefined"}},xCursorShapeStrokeStyle:{defaultValue:{value:"rgba(0, 0, 0, 0.5)"},description:"",name:"xCursorShapeStrokeStyle",required:!1,type:{name:"string | ((currentItem: any) => string) | undefined"}},xCursorShapeStrokeDasharray:{defaultValue:null,description:"",name:"xCursorShapeStrokeDasharray",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"Solid"'},{value:'"ShortDash"'},{value:'"ShortDash2"'},{value:'"ShortDot"'},{value:'"ShortDashDot"'},{value:'"ShortDashDotDot"'},{value:'"Dot"'},{value:'"Dash"'},{value:'"LongDash"'},{value:'"DashDot"'},{value:'"LongDashDot"'},{value:'"LongDashDotDot"'}]}}}}}catch{}try{S.contextType.displayName="Cursor.contextType",S.contextType.__docgenInfo={description:`Context lets components pass information deep down without explicitly
passing props.

Created from {@link createContext}`,displayName:"Cursor.contextType",props:{}}}catch{}class v extends h.Component{constructor(){super(...arguments),this.margin={left:0,right:40,top:0,bottom:24},this.xScaleProvider=j().inputDateAccessor(e=>e.date),this.yAccessor=e=>e.close,this.yExtents=e=>[e.high,e.low]}render(){const{crosshair:e,data:r,height:a,ratio:l,width:o,...s}=this.props,{margin:i,xScaleProvider:c}=this,{data:t,xScale:n,xAccessor:d,displayXAccessor:u}=c(r),p=d(t[t.length-1]),I=[d(t[Math.max(0,t.length-100)]),p],{customX:Q,...T}=s;return h.createElement(O,{height:a,ratio:l,width:o,margin:i,data:t,displayXAccessor:u,seriesName:"Data",xScale:n,xAccessor:d,xExtents:I},h.createElement(W,{id:1,yExtents:this.yExtents},h.createElement(z,{yAccessor:this.yAccessor}),h.createElement(B,{yAccessor:this.yAccessor}),h.createElement(R,{ticks:6}),h.createElement($,{ticks:5})),e&&h.createElement(G,null),!e&&h.createElement(X,{...T}))}}const P=H()(M()(N()(v)));try{v.displayName="Cursors",v.__docgenInfo={description:"",displayName:"Cursors",props:{strokeStyle:{defaultValue:null,description:"",name:"strokeStyle",required:!1,type:{name:"string | undefined"}},strokeDasharray:{defaultValue:null,description:"",name:"strokeDasharray",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"Solid"'},{value:'"ShortDash"'},{value:'"ShortDash2"'},{value:'"ShortDot"'},{value:'"ShortDashDot"'},{value:'"ShortDashDotDot"'},{value:'"Dot"'},{value:'"Dash"'},{value:'"LongDash"'},{value:'"DashDot"'},{value:'"LongDashDot"'},{value:'"LongDashDotDot"'}]}},crosshair:{defaultValue:null,description:"",name:"crosshair",required:!1,type:{name:"boolean | undefined"}},customX:{defaultValue:null,description:"",name:"customX",required:!1,type:{name:"((props: CursorProps, moreProps: any) => number) | undefined"}},disableYCursor:{defaultValue:null,description:"",name:"disableYCursor",required:!1,type:{name:"boolean | undefined"}},snapX:{defaultValue:null,description:"",name:"snapX",required:!1,type:{name:"boolean | undefined"}},useXCursorShape:{defaultValue:null,description:"",name:"useXCursorShape",required:!1,type:{name:"boolean | undefined"}},xCursorShapeFillStyle:{defaultValue:null,description:"",name:"xCursorShapeFillStyle",required:!1,type:{name:"string | ((currentItem: any) => string) | undefined"}},xCursorShapeStrokeStyle:{defaultValue:null,description:"",name:"xCursorShapeStrokeStyle",required:!1,type:{name:"string | ((currentItem: any) => string) | undefined"}},xCursorShapeStrokeDasharray:{defaultValue:null,description:"",name:"xCursorShapeStrokeDasharray",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"Solid"'},{value:'"ShortDash"'},{value:'"ShortDash2"'},{value:'"ShortDot"'},{value:'"ShortDashDot"'},{value:'"ShortDashDotDot"'},{value:'"Dot"'},{value:'"Dash"'},{value:'"LongDash"'},{value:'"DashDot"'},{value:'"LongDashDot"'},{value:'"LongDashDotDot"'}]}}}}}catch{}try{componentDidMount.displayName="componentDidMount",componentDidMount.__docgenInfo={description:"Called immediately after a component is mounted. Setting state here will trigger re-rendering.",displayName:"componentDidMount",props:{}}}catch{}const ue={component:S,title:"Features/Cursors",argTypes:{strokeStyle:{control:"color"},xCursorShapeFillStyle:{control:"color"},xCursorShapeStrokeStyle:{control:"color"}}},D={render:m=>h.createElement(P,{...m})},C={render:()=>h.createElement(P,{crosshair:!0})};var x,k,b;D.parameters={...D.parameters,docs:{...(x=D.parameters)==null?void 0:x.docs,source:{originalSource:`{
  render: args => <Cursors {...args} />
}`,...(b=(k=D.parameters)==null?void 0:k.docs)==null?void 0:b.source}}};var _,w,Y;C.parameters={...C.parameters,docs:{...(_=C.parameters)==null?void 0:_.docs,source:{originalSource:`{
  render: () => <Cursors crosshair />
}`,...(Y=(w=C.parameters)==null?void 0:w.docs)==null?void 0:Y.source}}};const le=["cursor","crosshair"];export{le as __namedExportsOrder,C as crosshair,D as cursor,ue as default};
