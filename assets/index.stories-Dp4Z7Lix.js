import{r as a}from"./index-CTzypqlY.js";import{w as G}from"./withOHLCData-BEr55ucm.js";import{G as z,f as h,w as $,m as H,n as L,o as O,X as V,Y as X}from"./withSize-Bqu-aQP_.js";import{d as q}from"./discontinuousTimeScaleProvider-DjLVsG-0.js";import{e as I}from"./ema-CshB59i3.js";import{C as R}from"./CandlestickSeries-CTmIVn2R.js";import"./jsx-runtime-D_zvdyIk.js";import"./baseIndicator-qdS_KWkb.js";import"./index-kspPnZk0.js";import"./ema-YsYnLjx4.js";import"./defaultOptionsForComputation-CN7nWbKN.js";import"./path-uFnBsLuY.js";import"./merge-WqXt2Bz7.js";import"./group-CTbjIu5X.js";import"./barWidth-H00B5QnB.js";class y extends a.Component{constructor(){super(...arguments),this.renderSVG=t=>{const{xAccessor:e,xScale:n,chartConfig:o,plotData:s}=t;if(!o)return null;const{yScale:p}=o,{className:m,usingProps:c,with:r,when:l}=this.props,i=s.filter(l);return a.createElement("g",{className:m},i.map((u,f)=>a.createElement(r,Object.assign({key:f},c,{xScale:n,yScale:p,xAccessor:e,plotData:s,datum:u}))))}}render(){return a.createElement(z,{svgDraw:this.renderSVG,drawOn:["pan","zoom","mousemove","drag"]})}}y.defaultProps={className:"react-financial-charts-enable-interaction react-financial-charts-annotate react-financial-charts-default-cursor"};class P extends a.Component{constructor(){super(...arguments),this.handleClick=t=>{const{onClick:e,xScale:n,yScale:o,datum:s}=this.props;e!==void 0&&e(t,{xScale:n,yScale:o,datum:s})},this.helper=()=>{const{x:t,y:e,datum:n,fill:o,text:s,tooltip:p,xAccessor:m,xScale:c,yScale:r,plotData:l}=this.props,i=h(t),u=h(e),[f,C]=[i({xScale:c,xAccessor:m,datum:n,plotData:l}),u({yScale:r,datum:n,plotData:l})];return{xPos:f,yPos:C,text:h(s)(n),fill:h(o)(n),tooltip:h(p)(n)}}}render(){const{className:t,textAnchor:e,fontFamily:n,fontSize:o,opacity:s,rotate:p}=this.props,{xPos:m,yPos:c,fill:r,text:l,tooltip:i}=this.helper();return a.createElement("g",{className:t},a.createElement("title",null,i),a.createElement("text",{x:m,y:c,fontFamily:n,fontSize:o,fill:r,opacity:s,transform:`rotate(${p}, ${m}, ${c})`,onClick:this.handleClick,textAnchor:e},l))}}P.defaultProps={className:"react-financial-charts-label-annotation",textAnchor:"middle",fontFamily:"-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif",fontSize:12,fill:"#000000",opacity:1,rotate:0,x:({xScale:d,xAccessor:t,datum:e})=>d(t(e))};class N extends a.Component{constructor(){super(...arguments),this.handleClick=t=>{const{onClick:e,xScale:n,yScale:o,datum:s}=this.props;e!==void 0&&e(t,{xScale:n,yScale:o,datum:s})},this.helper=()=>{const{x:t,y:e,datum:n,fill:o,tooltip:s,xAccessor:p,xScale:m,yScale:c,plotData:r}=this.props,l=h(t),i=h(e),[u,f]=[l({xScale:m,xAccessor:p,datum:n,plotData:r}),i({yScale:c,datum:n,plotData:r})];return{x:Math.round(u),y:Math.round(f),fill:h(o)(n),tooltip:h(s)(n)}}}render(){const{className:t,datum:e,stroke:n,opacity:o,path:s,pathWidth:p,pathHeight:m}=this.props,{x:c,y:r,fill:l,tooltip:i}=this.helper();return a.createElement("g",{className:t,onClick:this.handleClick},a.createElement("title",null,i),a.createElement("path",{transform:`translate(${c-p},${r-m})`,d:s(e),stroke:n,fill:l,opacity:o}))}}N.defaultProps={className:"react-financial-charts-svg-path-annotation",opacity:1,x:({xScale:d,xAccessor:t,datum:e})=>d(t(e))};class S extends a.Component{constructor(){super(...arguments),this.labelAnnotation={text:"Monday",tooltip:"Go short",y:({yScale:t,datum:e})=>t(e.high)},this.svgAnnotation={fill:"#2196f3",path:()=>"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z",pathWidth:12,pathHeight:22,tooltip:"Svg Annotation",y:({yScale:t,datum:e})=>t(e.high)},this.margin={left:0,right:48,top:0,bottom:24},this.xScaleProvider=q().inputDateAccessor(t=>t.date),this.when=t=>t.date.getDay()===1,this.yExtents=t=>[t.high,t.low]}render(){const{data:t,height:e,ratio:n,width:o,labelAnnotation:s,svgAnnotation:p}=this.props,c=I().id(1).options({windowSize:12}).merge((A,F)=>{A.ema12=F}).accessor(A=>A.ema12)(t),{data:r,xScale:l,xAccessor:i,displayXAccessor:u}=this.xScaleProvider(c),f=i(r[r.length-1]),M=[i(r[Math.max(0,r.length-100)]),f];return a.createElement(L,{height:e,ratio:n,width:o,margin:this.margin,data:r,displayXAccessor:u,seriesName:"Data",xScale:l,xAccessor:i,xExtents:M},a.createElement(O,{id:1,yExtents:this.yExtents},a.createElement(V,{showGridLines:!0}),a.createElement(X,{showGridLines:!0}),a.createElement(R,null),s&&a.createElement(y,{with:P,usingProps:this.labelAnnotation,when:this.when}),p&&a.createElement(y,{with:N,usingProps:this.svgAnnotation,when:this.when})))}}const k=G()($()(H()(S)));try{S.displayName="Annotated",S.__docgenInfo={description:"",displayName:"Annotated",props:{labelAnnotation:{defaultValue:null,description:"",name:"labelAnnotation",required:!1,type:{name:"boolean | undefined"}},svgAnnotation:{defaultValue:null,description:"",name:"svgAnnotation",required:!1,type:{name:"boolean | undefined"}}}}}catch{}try{componentDidMount.displayName="componentDidMount",componentDidMount.__docgenInfo={description:"Called immediately after a component is mounted. Setting state here will trigger re-rendering.",displayName:"componentDidMount",props:{}}}catch{}const st={component:y,title:"Features/Annotate"},x=()=>a.createElement(k,{labelAnnotation:!0}),g=()=>a.createElement(k,{svgAnnotation:!0});var E,w,_;x.parameters={...x.parameters,docs:{...(E=x.parameters)==null?void 0:E.docs,source:{originalSource:"() => <Annotated labelAnnotation />",...(_=(w=x.parameters)==null?void 0:w.docs)==null?void 0:_.source}}};var b,v,D;g.parameters={...g.parameters,docs:{...(b=g.parameters)==null?void 0:b.docs,source:{originalSource:"() => <Annotated svgAnnotation />",...(D=(v=g.parameters)==null?void 0:v.docs)==null?void 0:D.source}}};const rt=["labels","paths"];export{rt as __namedExportsOrder,st as default,x as labels,g as paths};
