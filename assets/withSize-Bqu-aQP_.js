var ei=Object.defineProperty;var ni=(t,e,n)=>e in t?ei(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var an=(t,e,n)=>ni(t,typeof e!="symbol"?e+"":e,n);import{c as Kt,g as ri,r as z,R as Ee}from"./index-CTzypqlY.js";import{j as L}from"./jsx-runtime-D_zvdyIk.js";function ii(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function se(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Et(t){return t=se(Math.abs(t)),t?t[1]:NaN}function si(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),s.push(n.substring(i-=a,i+a)),!((c+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function oi(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var ai=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function oe(t){if(!(e=ai.exec(t)))throw new Error("invalid format: "+t);var e;return new Ze({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}oe.prototype=Ze.prototype;function Ze(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ze.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ci(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var er;function ui(t,e){var n=se(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(er=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+se(t,Math.max(0,e+s-1))[0]}function cn(t,e){var n=se(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const un={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:ii,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>cn(t*100,e),r:cn,s:ui,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ln(t){return t}var hn=Array.prototype.map,fn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function li(t){var e=t.grouping===void 0||t.thousands===void 0?ln:si(hn.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?ln:oi(hn.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f){f=oe(f);var h=f.fill,p=f.align,m=f.sign,d=f.symbol,y=f.zero,g=f.width,x=f.comma,w=f.precision,b=f.trim,C=f.type;C==="n"?(x=!0,C="g"):un[C]||(w===void 0&&(w=12),b=!0,C="g"),(y||h==="0"&&p==="=")&&(y=!0,h="0",p="=");var D=d==="$"?n:d==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",N=d==="$"?r:/[%p]/.test(C)?o:"",E=un[C],_=/[defgprs%]/.test(C);w=w===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function k(S){var T=D,M=N,H,Z,O;if(C==="c")M=E(S)+M,S="";else{S=+S;var ct=S<0||1/S<0;if(S=isNaN(S)?c:E(Math.abs(S),w),b&&(S=ci(S)),ct&&+S==0&&m!=="+"&&(ct=!1),T=(ct?m==="("?m:a:m==="-"||m==="("?"":m)+T,M=(C==="s"?fn[8+er/3]:"")+M+(ct&&m==="("?")":""),_){for(H=-1,Z=S.length;++H<Z;)if(O=S.charCodeAt(H),48>O||O>57){M=(O===46?i+S.slice(H+1):S.slice(H))+M,S=S.slice(0,H);break}}}x&&!y&&(S=e(S,1/0));var nt=T.length+S.length+M.length,rt=nt<g?new Array(g-nt+1).join(h):"";switch(x&&y&&(S=e(rt+S,rt.length?g-M.length:1/0),rt=""),p){case"<":S=T+S+M+rt;break;case"=":S=T+rt+S+M;break;case"^":S=rt.slice(0,nt=rt.length>>1)+T+S+M+rt.slice(nt);break;default:S=rt+T+S+M;break}return s(S)}return k.toString=function(){return f+""},k}function l(f,h){var p=u((f=oe(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(Et(h)/3)))*3,d=Math.pow(10,-m),y=fn[8+m/3];return function(g){return p(d*g)+y}}return{format:u,formatPrefix:l}}var te,nr,rr;hi({thousands:",",grouping:[3],currency:["$",""]});function hi(t){return te=li(t),nr=te.format,rr=te.formatPrefix,te}function fi(t){return Math.max(0,-Et(Math.abs(t)))}function di(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Et(e)/3)))*3-Et(Math.abs(t)))}function pi(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Et(e)-Et(t))+1}var ve=new Date,we=new Date;function ut(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return t(s=new Date(+s)),s},i.ceil=function(s){return t(s=new Date(s-1)),e(s,1),t(s),s},i.round=function(s){var o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=function(s,o){return e(s=new Date(+s),o==null?1:Math.floor(o)),s},i.range=function(s,o,a){var c=[],u;if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return c;do c.push(u=new Date(+s)),e(s,a),t(s);while(u<s&&s<o);return c},i.filter=function(s){return ut(function(o){if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););})},n&&(i.count=function(s,o){return ve.setTime(+s),we.setTime(+o),t(ve),t(we),Math.floor(n(ve,we))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(o){return r(o)%s===0}:function(o){return i.count(0,o)%s===0}):i}),i}const gi=1e3,Xe=gi*60,mi=Xe*60,Qt=mi*24,ir=Qt*7,Pu=Qt*30,Mu=Qt*365;var Be=ut(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Xe)/Qt,t=>t.getDate()-1);Be.range;function bt(t){return ut(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Xe)/ir})}var sr=bt(0),ae=bt(1),yi=bt(2),xi=bt(3),At=bt(4),vi=bt(5),wi=bt(6);sr.range;ae.range;yi.range;xi.range;At.range;vi.range;wi.range;var xt=ut(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});xt.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:ut(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};xt.range;var je=ut(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/Qt},function(t){return t.getUTCDate()-1});je.range;function Ct(t){return ut(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/ir})}var or=Ct(0),ce=Ct(1),bi=Ct(2),Ci=Ct(3),Nt=Ct(4),_i=Ct(5),Si=Ct(6);or.range;ce.range;bi.range;Ci.range;Nt.range;_i.range;Si.range;var vt=ut(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});vt.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:ut(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};vt.range;function ar(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function cr(t){let e=t,n=t;t.length===1&&(e=(o,a)=>t(o)-a,n=Pi(t));function r(o,a,c,u){for(c==null&&(c=0),u==null&&(u=o.length);c<u;){const l=c+u>>>1;n(o[l],a)<0?c=l+1:u=l}return c}function i(o,a,c,u){for(c==null&&(c=0),u==null&&(u=o.length);c<u;){const l=c+u>>>1;n(o[l],a)>0?u=l:c=l+1}return c}function s(o,a,c,u){c==null&&(c=0),u==null&&(u=o.length);const l=r(o,a,c,u-1);return l>c&&e(o[l-1],a)>-e(o[l],a)?l-1:l}return{left:r,center:s,right:i}}function Pi(t){return(e,n)=>ar(t(e),n)}function Mi(t){return t===null?NaN:+t}const Di=cr(ar),ki=Di.right;cr(Mi).center;var Ae=Math.sqrt(50),Ne=Math.sqrt(10),Ie=Math.sqrt(2);function Ti(t,e,n){var r,i=-1,s,o,a;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(s=t,t=e,e=s),(a=ur(t,e,n))===0||!isFinite(a))return[];if(a>0){let c=Math.round(t/a),u=Math.round(e/a);for(c*a<t&&++c,u*a>e&&--u,o=new Array(s=u-c+1);++i<s;)o[i]=(c+i)*a}else{a=-a;let c=Math.round(t*a),u=Math.round(e*a);for(c/a<t&&++c,u/a>e&&--u,o=new Array(s=u-c+1);++i<s;)o[i]=(c+i)/a}return r&&o.reverse(),o}function ur(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=Ae?10:s>=Ne?5:s>=Ie?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=Ae?10:s>=Ne?5:s>=Ie?2:1)}function Ei(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=Ae?i*=10:s>=Ne?i*=5:s>=Ie&&(i*=2),e<t?-i:i}function be(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ce(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function zt(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Ai(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,c=t.shortMonths,u=Ft(i),l=Ot(i),f=Ft(s),h=Ot(s),p=Ft(o),m=Ot(o),d=Ft(a),y=Ot(a),g=Ft(c),x=Ot(c),w={a:ct,A:nt,b:rt,B:Br,c:null,d:xn,e:xn,f:ts,g:ls,G:fs,H:Qi,I:Ji,j:Ki,L:lr,m:es,M:ns,p:jr,q:qr,Q:bn,s:Cn,S:rs,u:is,U:ss,V:os,w:as,W:cs,x:null,X:null,y:us,Y:hs,Z:ds,"%":wn},b={a:Vr,A:Gr,b:Qr,B:Jr,c:null,d:vn,e:vn,f:ys,g:Ds,G:Ts,H:ps,I:gs,j:ms,L:fr,m:xs,M:vs,p:Kr,q:ti,Q:bn,s:Cn,S:ws,u:bs,U:Cs,V:_s,w:Ss,W:Ps,x:null,X:null,y:Ms,Y:ks,Z:Es,"%":wn},C={a:k,A:S,b:T,B:M,c:H,d:mn,e:mn,f:ji,g:gn,G:pn,H:yn,I:yn,j:$i,L:Bi,m:Yi,M:Zi,p:_,q:Wi,Q:Vi,s:Gi,S:Xi,u:Oi,U:Ri,V:Li,w:Fi,W:Hi,x:Z,X:O,y:gn,Y:pn,Z:Ui,"%":qi};w.x=D(n,w),w.X=D(r,w),w.c=D(e,w),b.x=D(n,b),b.X=D(r,b),b.c=D(e,b);function D(P,A){return function(I){var v=[],q=-1,R=0,G=P.length,Q,dt,on;for(I instanceof Date||(I=new Date(+I));++q<G;)P.charCodeAt(q)===37&&(v.push(P.slice(R,q)),(dt=dn[Q=P.charAt(++q)])!=null?Q=P.charAt(++q):dt=Q==="e"?" ":"0",(on=A[Q])&&(Q=on(I,dt)),v.push(Q),R=q+1);return v.push(P.slice(R,q)),v.join("")}}function N(P,A){return function(I){var v=zt(1900,void 0,1),q=E(v,P,I+="",0),R,G;if(q!=I.length)return null;if("Q"in v)return new Date(v.Q);if("s"in v)return new Date(v.s*1e3+("L"in v?v.L:0));if(A&&!("Z"in v)&&(v.Z=0),"p"in v&&(v.H=v.H%12+v.p*12),v.m===void 0&&(v.m="q"in v?v.q:0),"V"in v){if(v.V<1||v.V>53)return null;"w"in v||(v.w=1),"Z"in v?(R=Ce(zt(v.y,0,1)),G=R.getUTCDay(),R=G>4||G===0?ce.ceil(R):ce(R),R=je.offset(R,(v.V-1)*7),v.y=R.getUTCFullYear(),v.m=R.getUTCMonth(),v.d=R.getUTCDate()+(v.w+6)%7):(R=be(zt(v.y,0,1)),G=R.getDay(),R=G>4||G===0?ae.ceil(R):ae(R),R=Be.offset(R,(v.V-1)*7),v.y=R.getFullYear(),v.m=R.getMonth(),v.d=R.getDate()+(v.w+6)%7)}else("W"in v||"U"in v)&&("w"in v||(v.w="u"in v?v.u%7:"W"in v?1:0),G="Z"in v?Ce(zt(v.y,0,1)).getUTCDay():be(zt(v.y,0,1)).getDay(),v.m=0,v.d="W"in v?(v.w+6)%7+v.W*7-(G+5)%7:v.w+v.U*7-(G+6)%7);return"Z"in v?(v.H+=v.Z/100|0,v.M+=v.Z%100,Ce(v)):be(v)}}function E(P,A,I,v){for(var q=0,R=A.length,G=I.length,Q,dt;q<R;){if(v>=G)return-1;if(Q=A.charCodeAt(q++),Q===37){if(Q=A.charAt(q++),dt=C[Q in dn?A.charAt(q++):Q],!dt||(v=dt(P,I,v))<0)return-1}else if(Q!=I.charCodeAt(v++))return-1}return v}function _(P,A,I){var v=u.exec(A.slice(I));return v?(P.p=l.get(v[0].toLowerCase()),I+v[0].length):-1}function k(P,A,I){var v=p.exec(A.slice(I));return v?(P.w=m.get(v[0].toLowerCase()),I+v[0].length):-1}function S(P,A,I){var v=f.exec(A.slice(I));return v?(P.w=h.get(v[0].toLowerCase()),I+v[0].length):-1}function T(P,A,I){var v=g.exec(A.slice(I));return v?(P.m=x.get(v[0].toLowerCase()),I+v[0].length):-1}function M(P,A,I){var v=d.exec(A.slice(I));return v?(P.m=y.get(v[0].toLowerCase()),I+v[0].length):-1}function H(P,A,I){return E(P,e,A,I)}function Z(P,A,I){return E(P,n,A,I)}function O(P,A,I){return E(P,r,A,I)}function ct(P){return o[P.getDay()]}function nt(P){return s[P.getDay()]}function rt(P){return c[P.getMonth()]}function Br(P){return a[P.getMonth()]}function jr(P){return i[+(P.getHours()>=12)]}function qr(P){return 1+~~(P.getMonth()/3)}function Vr(P){return o[P.getUTCDay()]}function Gr(P){return s[P.getUTCDay()]}function Qr(P){return c[P.getUTCMonth()]}function Jr(P){return a[P.getUTCMonth()]}function Kr(P){return i[+(P.getUTCHours()>=12)]}function ti(P){return 1+~~(P.getUTCMonth()/3)}return{format:function(P){var A=D(P+="",w);return A.toString=function(){return P},A},parse:function(P){var A=N(P+="",!1);return A.toString=function(){return P},A},utcFormat:function(P){var A=D(P+="",b);return A.toString=function(){return P},A},utcParse:function(P){var A=N(P+="",!0);return A.toString=function(){return P},A}}}var dn={"-":"",_:" ",0:"0"},$=/^\s*\d+/,Ni=/^%/,Ii=/[\\^$*+?|[\]().{}]/g;function F(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function zi(t){return t.replace(Ii,"\\$&")}function Ft(t){return new RegExp("^(?:"+t.map(zi).join("|")+")","i")}function Ot(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Fi(t,e,n){var r=$.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Oi(t,e,n){var r=$.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Ri(t,e,n){var r=$.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Li(t,e,n){var r=$.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Hi(t,e,n){var r=$.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function pn(t,e,n){var r=$.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function gn(t,e,n){var r=$.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ui(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Wi(t,e,n){var r=$.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Yi(t,e,n){var r=$.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function mn(t,e,n){var r=$.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function $i(t,e,n){var r=$.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function yn(t,e,n){var r=$.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Zi(t,e,n){var r=$.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Xi(t,e,n){var r=$.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Bi(t,e,n){var r=$.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ji(t,e,n){var r=$.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function qi(t,e,n){var r=Ni.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Vi(t,e,n){var r=$.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Gi(t,e,n){var r=$.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function xn(t,e){return F(t.getDate(),e,2)}function Qi(t,e){return F(t.getHours(),e,2)}function Ji(t,e){return F(t.getHours()%12||12,e,2)}function Ki(t,e){return F(1+Be.count(xt(t),t),e,3)}function lr(t,e){return F(t.getMilliseconds(),e,3)}function ts(t,e){return lr(t,e)+"000"}function es(t,e){return F(t.getMonth()+1,e,2)}function ns(t,e){return F(t.getMinutes(),e,2)}function rs(t,e){return F(t.getSeconds(),e,2)}function is(t){var e=t.getDay();return e===0?7:e}function ss(t,e){return F(sr.count(xt(t)-1,t),e,2)}function hr(t){var e=t.getDay();return e>=4||e===0?At(t):At.ceil(t)}function os(t,e){return t=hr(t),F(At.count(xt(t),t)+(xt(t).getDay()===4),e,2)}function as(t){return t.getDay()}function cs(t,e){return F(ae.count(xt(t)-1,t),e,2)}function us(t,e){return F(t.getFullYear()%100,e,2)}function ls(t,e){return t=hr(t),F(t.getFullYear()%100,e,2)}function hs(t,e){return F(t.getFullYear()%1e4,e,4)}function fs(t,e){var n=t.getDay();return t=n>=4||n===0?At(t):At.ceil(t),F(t.getFullYear()%1e4,e,4)}function ds(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+F(e/60|0,"0",2)+F(e%60,"0",2)}function vn(t,e){return F(t.getUTCDate(),e,2)}function ps(t,e){return F(t.getUTCHours(),e,2)}function gs(t,e){return F(t.getUTCHours()%12||12,e,2)}function ms(t,e){return F(1+je.count(vt(t),t),e,3)}function fr(t,e){return F(t.getUTCMilliseconds(),e,3)}function ys(t,e){return fr(t,e)+"000"}function xs(t,e){return F(t.getUTCMonth()+1,e,2)}function vs(t,e){return F(t.getUTCMinutes(),e,2)}function ws(t,e){return F(t.getUTCSeconds(),e,2)}function bs(t){var e=t.getUTCDay();return e===0?7:e}function Cs(t,e){return F(or.count(vt(t)-1,t),e,2)}function dr(t){var e=t.getUTCDay();return e>=4||e===0?Nt(t):Nt.ceil(t)}function _s(t,e){return t=dr(t),F(Nt.count(vt(t),t)+(vt(t).getUTCDay()===4),e,2)}function Ss(t){return t.getUTCDay()}function Ps(t,e){return F(ce.count(vt(t)-1,t),e,2)}function Ms(t,e){return F(t.getUTCFullYear()%100,e,2)}function Ds(t,e){return t=dr(t),F(t.getUTCFullYear()%100,e,2)}function ks(t,e){return F(t.getUTCFullYear()%1e4,e,4)}function Ts(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Nt(t):Nt.ceil(t),F(t.getUTCFullYear()%1e4,e,4)}function Es(){return"+0000"}function wn(){return"%"}function bn(t){return+t}function Cn(t){return Math.floor(+t/1e3)}var _t,As,Ns,Is;zs({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zs(t){return _t=Ai(t),As=_t.format,Ns=_t.parse,Is=_t.utcFormat,_t.utcParse,_t}function pr(t,e){let n,r;for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}function gr(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function qe(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}const Zt=t=>t;function Fs(){let t=Zt;function e(){const r=arguments.length;if(r===0)return[];const i=qe(arguments,n)??0,s=new Array(i);for(let o=-1;++o<i;){for(let a=-1,c=s[o]=new Array(r);++a<r;)c[a]=arguments[a][o];s[o]=t.apply(this,s[o])}return s}function n(r){return r.length}return e.combine=function(r){return arguments.length?(t=r,e):t},e}const ze=(t,e,n)=>{let r=0,i=t.length-1;for(;i-r>1;){const a=Math.round((r+i)/2),c=t[a];n(c)<=e?r=a:i=a}const s=n(t[r]),o=n(t[i]);return(s==null?void 0:s.valueOf())===(e==null?void 0:e.valueOf())&&(i=r),(o==null?void 0:o.valueOf())===(e==null?void 0:e.valueOf())&&(r=i),s<e&&o<e&&(r=i),s>e&&o>e&&(i=r),{left:r,right:i}},Os=(t,e,n)=>{const{left:r,right:i}=ze(t,e,n);if(r===i)return t[r];const s=n(t[r]),o=n(t[i]);return Math.abs(s.valueOf()-e.valueOf())<Math.abs(o.valueOf()-e.valueOf())?t[r]:t[i]},ue=(t,e)=>{if(t===e)return!0;if(!(t instanceof Object)||!(e instanceof Object))return!1;const n=Object.keys(t),r=n.length;for(let i=0;i<r;i++)if(!(n[i]in e))return!1;for(let i=0;i<r;i++)if(t[n[i]]!==e[n[i]])return!1;return r===Object.keys(e).length},mr=t=>{const e=Rs(t).split(",");return e.length===1?[]:e.map(n=>Number(n))},Rs=t=>{switch(t){default:case"Solid":return"none";case"ShortDash":return"6, 2";case"ShortDash2":return"6, 3";case"ShortDot":return"2, 2";case"ShortDashDot":return"6, 2, 2, 2";case"ShortDashDotDot":return"6, 2, 2, 2, 2, 2";case"Dot":return"2, 6";case"Dash":return"4, 6";case"LongDash":return"16, 6";case"DashDot":return"8, 6, 2, 6";case"LongDashDot":return"16, 6, 2, 6";case"LongDashDotDot":return"16, 6, 2, 6, 2, 6"}},ee=t=>(t>0)-(t<0),Du=(t=[])=>{const e=Array.isArray(t)?t:[t],n=e.length;return function(r,i){if(n===0)return K(r)?r:i;let s=0;for(;r!=null&&s<n;)r=r[e[s++]];return s===n?r:i}},Xt=t=>typeof t=="function"?t:()=>t;function X(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}const _n="mouseenter.interaction",Sn="mouseleave.interaction",J="mousemove.pan",ot="mouseup.pan",St="touchmove.pan",Pt="touchend.pan touchcancel.pan";function Ht(t){return{pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY}}function Y(t,e){if(e&&t){let n;for(let r=0;r<t.length;r++)if(n=t[r],K(e(n)))return n;return}return t?t[0]:void 0}const Fe=Y;function U(t,e){if(e&&t){let r;for(let i=t.length-1;i>=0;i--)if(r=t[i],K(e(r)))return r;return}const n=t?t.length:0;return n?t[n-1]:void 0}const K=t=>t!=null;function Ve(t){return!K(t)}function Ls(t){return K(t)&&typeof t=="object"&&!Array.isArray(t)}function Ut(t,e){const n=e.currentTarget,r=n.getBoundingClientRect(),i=t.clientX-r.left-n.clientLeft,s=t.clientY-r.top-n.clientTop;return[Math.round(i),Math.round(s)]}function Mt(t,e){const n=t.currentTarget,r=e??n.getBoundingClientRect(),i=t.clientX-r.left-n.clientLeft,s=t.clientY-r.top-n.clientTop;return[Math.round(i),Math.round(s)]}function _e(t,e){t.forEach(n=>{n.setTransform(1,0,0,1,0,0),n.clearRect(-1,-1,n.canvas.width+2,n.canvas.height+2),n.scale(e,e)})}function Hs(t={},e=n=>n){const n=Object.keys(t),r=new Array(n.length);return n.forEach((i,s)=>{r[s]=e(t[i],i,t)}),r}function Us(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ge(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function yr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Jt(){}var Bt=.7,le=1/Bt,Tt="\\s*([+-]?\\d+)\\s*",jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",at="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ws=/^#([0-9a-f]{3,8})$/,Ys=new RegExp(`^rgb\\(${Tt},${Tt},${Tt}\\)$`),$s=new RegExp(`^rgb\\(${at},${at},${at}\\)$`),Zs=new RegExp(`^rgba\\(${Tt},${Tt},${Tt},${jt}\\)$`),Xs=new RegExp(`^rgba\\(${at},${at},${at},${jt}\\)$`),Bs=new RegExp(`^hsl\\(${jt},${at},${at}\\)$`),js=new RegExp(`^hsla\\(${jt},${at},${at},${jt}\\)$`),Pn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ge(Jt,qt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Mn,formatHex:Mn,formatHex8:qs,formatHsl:Vs,formatRgb:Dn,toString:Dn});function Mn(){return this.rgb().formatHex()}function qs(){return this.rgb().formatHex8()}function Vs(){return xr(this).formatHsl()}function Dn(){return this.rgb().formatRgb()}function qt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ws.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?kn(e):n===3?new V(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ne(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ne(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ys.exec(t))?new V(e[1],e[2],e[3],1):(e=$s.exec(t))?new V(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Zs.exec(t))?ne(e[1],e[2],e[3],e[4]):(e=Xs.exec(t))?ne(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Bs.exec(t))?An(e[1],e[2]/100,e[3]/100,1):(e=js.exec(t))?An(e[1],e[2]/100,e[3]/100,e[4]):Pn.hasOwnProperty(t)?kn(Pn[t]):t==="transparent"?new V(NaN,NaN,NaN,0):null}function kn(t){return new V(t>>16&255,t>>8&255,t&255,1)}function ne(t,e,n,r){return r<=0&&(t=e=n=NaN),new V(t,e,n,r)}function Gs(t){return t instanceof Jt||(t=qt(t)),t?(t=t.rgb(),new V(t.r,t.g,t.b,t.opacity)):new V}function Oe(t,e,n,r){return arguments.length===1?Gs(t):new V(t,e,n,r??1)}function V(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ge(V,Oe,yr(Jt,{brighter(t){return t=t==null?le:Math.pow(le,t),new V(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Bt:Math.pow(Bt,t),new V(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new V(yt(this.r),yt(this.g),yt(this.b),he(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tn,formatHex:Tn,formatHex8:Qs,formatRgb:En,toString:En}));function Tn(){return`#${gt(this.r)}${gt(this.g)}${gt(this.b)}`}function Qs(){return`#${gt(this.r)}${gt(this.g)}${gt(this.b)}${gt((isNaN(this.opacity)?1:this.opacity)*255)}`}function En(){const t=he(this.opacity);return`${t===1?"rgb(":"rgba("}${yt(this.r)}, ${yt(this.g)}, ${yt(this.b)}${t===1?")":`, ${t})`}`}function he(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function yt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function gt(t){return t=yt(t),(t<16?"0":"")+t.toString(16)}function An(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new it(t,e,n,r)}function xr(t){if(t instanceof it)return new it(t.h,t.s,t.l,t.opacity);if(t instanceof Jt||(t=qt(t)),!t)return new it;if(t instanceof it)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,c=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=c<.5?s+i:2-s-i,o*=60):a=c>0&&c<1?0:o,new it(o,a,c,t.opacity)}function Js(t,e,n,r){return arguments.length===1?xr(t):new it(t,e,n,r??1)}function it(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ge(it,Js,yr(Jt,{brighter(t){return t=t==null?le:Math.pow(le,t),new it(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Bt:Math.pow(Bt,t),new it(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new V(Se(t>=240?t-240:t+120,i,r),Se(t,i,r),Se(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new it(Nn(this.h),re(this.s),re(this.l),he(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=he(this.opacity);return`${t===1?"hsl(":"hsla("}${Nn(this.h)}, ${re(this.s)*100}%, ${re(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Nn(t){return t=(t||0)%360,t<0?t+360:t}function re(t){return Math.max(0,Math.min(1,t||0))}function Se(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Qe=t=>()=>t;function Ks(t,e){return function(n){return t+n*e}}function to(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function eo(t){return(t=+t)==1?vr:function(e,n){return n-e?to(e,n,t):Qe(isNaN(e)?n:e)}}function vr(t,e){var n=e-t;return n?Ks(t,n):Qe(isNaN(t)?e:t)}const In=function t(e){var n=eo(e);function r(i,s){var o=n((i=Oe(i)).r,(s=Oe(s)).r),a=n(i.g,s.g),c=n(i.b,s.b),u=vr(i.opacity,s.opacity);return function(l){return i.r=o(l),i.g=a(l),i.b=c(l),i.opacity=u(l),i+""}}return r.gamma=t,r}(1);function no(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function ro(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function io(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Je(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function so(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function fe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function oo(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Je(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Re=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pe=new RegExp(Re.source,"g");function ao(t){return function(){return t}}function co(t){return function(e){return t(e)+""}}function uo(t,e){var n=Re.lastIndex=Pe.lastIndex=0,r,i,s,o=-1,a=[],c=[];for(t=t+"",e=e+"";(r=Re.exec(t))&&(i=Pe.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,c.push({i:o,x:fe(r,i)})),n=Pe.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?co(c[0].x):ao(e):(e=c.length,function(u){for(var l=0,f;l<e;++l)a[(f=c[l]).i]=f.x(u);return a.join("")})}function Je(t,e){var n=typeof e,r;return e==null||n==="boolean"?Qe(e):(n==="number"?fe:n==="string"?(r=qt(e))?(e=r,In):uo:e instanceof qt?In:e instanceof Date?so:ro(e)?no:Array.isArray(e)?io:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?oo:fe)(t,e)}function lo(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function ho(t){return function(){return t}}function fo(t){return+t}var zn=[0,1];function Dt(t){return t}function Le(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:ho(isNaN(e)?NaN:.5)}function po(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function go(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=Le(i,r),s=n(o,s)):(r=Le(r,i),s=n(s,o)),function(a){return s(r(a))}}function mo(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Le(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var c=ki(t,a,1,r)-1;return s[c](i[c](a))}}function yo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function xo(){var t=zn,e=zn,n=Je,r,i,s,o=Dt,a,c,u;function l(){var h=Math.min(t.length,e.length);return o!==Dt&&(o=po(t[0],t[h-1])),a=h>2?mo:go,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=a(t.map(r),e,n)))(r(o(h)))}return f.invert=function(h){return o(i((u||(u=a(e,t.map(r),fe)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,fo),l()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),l()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=lo,l()},f.clamp=function(h){return arguments.length?(o=h?!0:Dt,l()):o!==Dt},f.interpolate=function(h){return arguments.length?(n=h,l()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return r=h,i=p,l()}}function vo(){return xo()(Dt,Dt)}function wo(t,e,n,r){var i=Ei(t,e,n),s;switch(r=oe(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=di(i,o))&&(r.precision=s),rr(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=pi(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=fi(i))&&(r.precision=s-(r.type==="%")*2);break}}return nr(r)}function bo(t){var e=t.domain;return t.ticks=function(n){var r=e();return Ti(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return wo(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],c,u,l=10;for(a<o&&(u=o,o=a,a=u,u=i,i=s,s=u);l-- >0;){if(u=ur(o,a,n),u===c)return r[i]=o,r[s]=a,e(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;c=u}return t},t}function wr(){var t=vo();return t.copy=function(){return yo(t,wr())},Us.apply(t,arguments),bo(t)}var Me,Fn;function Co(){if(Fn)return Me;Fn=1;var t=1/0,e=9007199254740991,n="[object Arguments]",r="[object Function]",i="[object GeneratorFunction]",s=typeof Kt=="object"&&Kt&&Kt.Object===Object&&Kt,o=typeof self=="object"&&self&&self.Object===Object&&self,a=s||o||Function("return this")(),c=Object.prototype,u=c.hasOwnProperty,l=c.toString,f=a.Symbol,h=c.propertyIsEnumerable,p=f?f.isConcatSpreadable:void 0;function m(_,k,S,T,M){var H=-1,Z=_.length;for(S||(S=d),M||(M=[]);++H<Z;){var O=_[H];S(O)?m(O,k-1,S,T,M):M[M.length]=O}return M}function d(_){return x(_)||g(_)||!!(p&&_&&_[p])}function y(_){var k=_?_.length:0;return k?m(_,t):[]}function g(_){return b(_)&&u.call(_,"callee")&&(!h.call(_,"callee")||l.call(_)==n)}var x=Array.isArray;function w(_){return _!=null&&D(_.length)&&!C(_)}function b(_){return E(_)&&w(_)}function C(_){var k=N(_)?l.call(_):"";return k==r||k==i}function D(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=e}function N(_){var k=typeof _;return!!_&&(k=="object"||k=="function")}function E(_){return!!_&&typeof _=="object"}return Me=y,Me}var _o=Co();const So=ri(_o),On={flipYScale:!1,id:0,origin:[0,0],padding:0,yPan:!0,yPanEnabled:!1,yScale:wr()};function Po({width:t,height:e},n){const r=n.height||e;return{availableHeight:e,width:t,height:r}}function Mo(t){return e=>{const n=t(e);return Ls(n)?Hs(n):n}}function Rn(t){if(Array.isArray(t)&&t.length===2){const[e,n]=t;return typeof e=="number"&&typeof n=="number"}return!1}const Do=t=>!(t===void 0||t.id===void 0);function br(t,e,n=[]){return z.Children.map(e,r=>{if(!r||!Do(r.props))return;const i={...On,...r.props},{id:s,origin:o,padding:a,yExtents:c,yScale:u=On.yScale,flipYScale:l,yExtentsCalculator:f}=i,h=u.copy(),{width:p,height:m,availableHeight:d}=Po(t,i),{yPan:y}=i;let{yPanEnabled:g}=i;const x=c?(Array.isArray(c)?c:[c]).map(Xt):void 0,w=n.find(b=>b.id===s);if(Rn(c))if(w&&w.yPan&&w.yPanEnabled&&y&&g&&ue(w.originalYExtentsProp,c))h.domain(w.yScale.domain());else{const[b,C]=c;h.domain([b,C])}else w&&w.yPanEnabled&&(Rn(w.originalYExtentsProp)||(h.domain(w.yScale.domain()),g=!0));return{id:s,origin:Xt(o)(p,d),padding:a,originalYExtentsProp:c,yExtents:x,yExtentsCalculator:f,flipYScale:l,yScale:h,yPan:y,yPanEnabled:g,width:p,height:m}}).filter(r=>r!==void 0)}function lt(t,e){return t.filter(r=>{const i=r.origin[1],s=i+r.height;return e[1]>i&&e[1]<s}).map(r=>r.id)}function ko(t,e,n,r){if(t.rangeRoundPoints||Ve(t.invert)){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.rangeRoundPoints&&t.rangeRoundPoints(r?[0,e]:[e,0],n),t.rangeRound&&t.range(r?[0,e]:[e,0]).padding(n)}else{const{top:i,bottom:s}=isNaN(n)?n:{top:n,bottom:n};t.range(r?[i,e-s]:[e-s,i])}return t}function To(t,e,n){const r=t.map(o=>n.map(Mo(o))),i=So(r);return e.invert?pr(i):[...new Set(i).values()]}function $t(t,{plotData:e,xAccessor:n,displayXAccessor:r,fullData:i},s,o,a){const c=t.map(({yExtentsCalculator:f,yExtents:h,yScale:p})=>{const m=f?f({plotData:e,xDomain:s,xAccessor:n,displayXAccessor:r,fullData:i}):To(h,p,e),d=o!==void 0?p.range().map(y=>y-o).map(p.invert):p.domain();return{realYDomain:m,yDomainDY:d,prevYDomain:p.domain()}});return Fs().combine((f,{realYDomain:h,yDomainDY:p,prevYDomain:m})=>{const{id:d,padding:y,height:g,yScale:x,yPan:w,flipYScale:b,yPanEnabled:C=!1}=f,D=a!==void 0?a.indexOf(d)>-1:!0,N=w&&C?D?p:m:h,E=ko(x.copy().domain(N),g,y,b);return{...f,yScale:E,realYDomain:h}})(t,c)}function pt(t,e,n,r){let i,s;if(t.invert)i=t.invert(n[0]),s=Os(r,i,e);else{const o=t.range().map((a,c)=>({x:Math.abs(a-n[0]),idx:c})).reduce((a,c)=>a.x<c.x?a:c);s=o!==void 0?r[o.idx]:r[0]}return s}const Eo=t=>{const{xScale:e,xAccessor:n,mouseXY:r,plotData:i}=t,s=pt(e,n,r,i);return n(s)},ku=t=>{const{xAccessor:e,plotData:n}=t,r=U(n);return e(r)},Tu=t=>{const{xScale:e}=t,[,n]=e.domain();return n};var He="http://www.w3.org/1999/xhtml";const Ln={svg:"http://www.w3.org/2000/svg",xhtml:He,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ln.hasOwnProperty(e)?{space:Ln[e],local:t}:t}function Ao(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===He&&e.documentElement.namespaceURI===He?e.createElement(t):e.createElementNS(n,t)}}function No(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function _r(t){var e=Cr(t);return(e.local?No:Ao)(e)}function Io(){}function Sr(t){return t==null?Io:function(){return this.querySelector(t)}}function zo(t){typeof t!="function"&&(t=Sr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),c,u,l=0;l<o;++l)(c=s[l])&&(u=t.call(c,c.__data__,l,s))&&("__data__"in c&&(u.__data__=c.__data__),a[l]=u);return new et(r,this._parents)}function Fo(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Oo(){return[]}function Ro(t){return t==null?Oo:function(){return this.querySelectorAll(t)}}function Lo(t){return function(){return Fo(t.apply(this,arguments))}}function Ho(t){typeof t=="function"?t=Lo(t):t=Ro(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,c,u=0;u<a;++u)(c=o[u])&&(r.push(t.call(c,c.__data__,u,o)),i.push(c));return new et(r,i)}function Uo(t){return function(){return this.matches(t)}}function Pr(t){return function(e){return e.matches(t)}}var Wo=Array.prototype.find;function Yo(t){return function(){return Wo.call(this.children,t)}}function $o(){return this.firstElementChild}function Zo(t){return this.select(t==null?$o:Yo(typeof t=="function"?t:Pr(t)))}var Xo=Array.prototype.filter;function Bo(){return Array.from(this.children)}function jo(t){return function(){return Xo.call(this.children,t)}}function qo(t){return this.selectAll(t==null?Bo:jo(typeof t=="function"?t:Pr(t)))}function Vo(t){typeof t!="function"&&(t=Uo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],c,u=0;u<o;++u)(c=s[u])&&t.call(c,c.__data__,u,s)&&a.push(c);return new et(r,this._parents)}function Mr(t){return new Array(t.length)}function Go(){return new et(this._enter||this._groups.map(Mr),this._parents)}function de(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}de.prototype={constructor:de,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Qo(t){return function(){return t}}function Jo(t,e,n,r,i,s){for(var o=0,a,c=e.length,u=s.length;o<u;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new de(t,s[o]);for(;o<c;++o)(a=e[o])&&(i[o]=a)}function Ko(t,e,n,r,i,s,o){var a,c,u=new Map,l=e.length,f=s.length,h=new Array(l),p;for(a=0;a<l;++a)(c=e[a])&&(h[a]=p=o.call(c,c.__data__,a,e)+"",u.has(p)?i[a]=c:u.set(p,c));for(a=0;a<f;++a)p=o.call(t,s[a],a,s)+"",(c=u.get(p))?(r[a]=c,c.__data__=s[a],u.delete(p)):n[a]=new de(t,s[a]);for(a=0;a<l;++a)(c=e[a])&&u.get(h[a])===c&&(i[a]=c)}function ta(t){return t.__data__}function ea(t,e){if(!arguments.length)return Array.from(this,ta);var n=e?Ko:Jo,r=this._parents,i=this._groups;typeof t!="function"&&(t=Qo(t));for(var s=i.length,o=new Array(s),a=new Array(s),c=new Array(s),u=0;u<s;++u){var l=r[u],f=i[u],h=f.length,p=na(t.call(l,l&&l.__data__,u,r)),m=p.length,d=a[u]=new Array(m),y=o[u]=new Array(m),g=c[u]=new Array(h);n(l,f,d,y,g,p,e);for(var x=0,w=0,b,C;x<m;++x)if(b=d[x]){for(x>=w&&(w=x+1);!(C=y[w])&&++w<m;);b._next=C||null}}return o=new et(o,r),o._enter=a,o._exit=c,o}function na(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ra(){return new et(this._exit||this._groups.map(Mr),this._parents)}function ia(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function sa(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),c=0;c<o;++c)for(var u=n[c],l=r[c],f=u.length,h=a[c]=new Array(f),p,m=0;m<f;++m)(p=u[m]||l[m])&&(h[m]=p);for(;c<i;++c)a[c]=n[c];return new et(a,this._parents)}function oa(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function aa(t){t||(t=ca);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,c=i[s]=new Array(a),u,l=0;l<a;++l)(u=o[l])&&(c[l]=u);c.sort(e)}return new et(i,this._parents).order()}function ca(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ua(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function la(){return Array.from(this)}function ha(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function fa(){let t=0;for(const e of this)++t;return t}function da(){return!this.node()}function pa(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function ga(t){return function(){this.removeAttribute(t)}}function ma(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ya(t,e){return function(){this.setAttribute(t,e)}}function xa(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function va(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function wa(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ba(t,e){var n=Cr(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?ma:ga:typeof e=="function"?n.local?wa:va:n.local?xa:ya)(n,e))}function Dr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ca(t){return function(){this.style.removeProperty(t)}}function _a(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Sa(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Pa(t,e,n){return arguments.length>1?this.each((e==null?Ca:typeof e=="function"?Sa:_a)(t,e,n??"")):Ma(this.node(),t)}function Ma(t,e){return t.style.getPropertyValue(e)||Dr(t).getComputedStyle(t,null).getPropertyValue(e)}function Da(t){return function(){delete this[t]}}function ka(t,e){return function(){this[t]=e}}function Ta(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ea(t,e){return arguments.length>1?this.each((e==null?Da:typeof e=="function"?Ta:ka)(t,e)):this.node()[t]}function kr(t){return t.trim().split(/^|\s+/)}function Ke(t){return t.classList||new Tr(t)}function Tr(t){this._node=t,this._names=kr(t.getAttribute("class")||"")}Tr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Er(t,e){for(var n=Ke(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ar(t,e){for(var n=Ke(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Aa(t){return function(){Er(this,t)}}function Na(t){return function(){Ar(this,t)}}function Ia(t,e){return function(){(e.apply(this,arguments)?Er:Ar)(this,t)}}function za(t,e){var n=kr(t+"");if(arguments.length<2){for(var r=Ke(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Ia:e?Aa:Na)(n,e))}function Fa(){this.textContent=""}function Oa(t){return function(){this.textContent=t}}function Ra(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function La(t){return arguments.length?this.each(t==null?Fa:(typeof t=="function"?Ra:Oa)(t)):this.node().textContent}function Ha(){this.innerHTML=""}function Ua(t){return function(){this.innerHTML=t}}function Wa(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ya(t){return arguments.length?this.each(t==null?Ha:(typeof t=="function"?Wa:Ua)(t)):this.node().innerHTML}function $a(){this.nextSibling&&this.parentNode.appendChild(this)}function Za(){return this.each($a)}function Xa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ba(){return this.each(Xa)}function ja(t){var e=typeof t=="function"?t:_r(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function qa(){return null}function Va(t,e){var n=typeof t=="function"?t:_r(t),r=e==null?qa:typeof e=="function"?e:Sr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ga(){var t=this.parentNode;t&&t.removeChild(this)}function Qa(){return this.each(Ga)}function Ja(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ka(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function tc(t){return this.select(t?Ka:Ja)}function ec(t){return arguments.length?this.property("__data__",t):this.node().__data__}function nc(t){return function(e){t.call(this,e,this.__data__)}}function rc(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function ic(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function sc(t,e,n){return function(){var r=this.__on,i,s=nc(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function oc(t,e,n){var r=rc(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,l;c<u;++c)for(i=0,l=a[c];i<s;++i)if((o=r[i]).type===l.type&&o.name===l.name)return l.value}return}for(a=e?sc:ic,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function Nr(t,e,n){var r=Dr(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ac(t,e){return function(){return Nr(this,t,e)}}function cc(t,e){return function(){return Nr(this,t,e.apply(this,arguments))}}function uc(t,e){return this.each((typeof e=="function"?cc:ac)(t,e))}function*lc(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var hc=[null];function et(t,e){this._groups=t,this._parents=e}function fc(){return this}et.prototype={constructor:et,select:zo,selectAll:Ho,selectChild:Zo,selectChildren:qo,filter:Vo,data:ea,enter:Go,exit:ra,join:ia,merge:sa,selection:fc,order:oa,sort:aa,call:ua,nodes:la,node:ha,size:fa,empty:da,each:pa,attr:ba,style:Pa,property:Ea,classed:za,text:La,html:Ya,raise:Za,lower:Ba,append:ja,insert:Va,remove:Qa,clone:tc,datum:ec,on:oc,dispatch:uc,[Symbol.iterator]:lc};function W(t){return typeof t=="string"?new et([[document.querySelector(t)]],[document.documentElement]):new et([[t]],hc)}function Ir(t){let e;for(;e=t.sourceEvent;)t=e;return t}function mt(t,e){if(t=Ir(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function Hn(t,e){return t.target&&(t=Ir(t),e===void 0&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,n=>mt(n,e))}class zr extends z.Component{constructor(e){super(e),this.dx=0,this.dy=0,this.mouseInside=!1,this.mouseInteraction=!0,this.ref=z.createRef(),this.handleEnter=n=>{const{onMouseEnter:r}=this.props;if(r!==void 0){if(this.mouseInside=!0,!this.state.panInProgress&&!this.state.dragInProgress){const i=X(this.ref.current);W(i).on(J,this.handleMouseMove)}r(n)}},this.handleLeave=n=>{const{onMouseLeave:r}=this.props;if(r!==void 0){if(this.mouseInside=!1,!this.state.panInProgress&&!this.state.dragInProgress){const i=X(this.ref.current);W(i).on(J,null)}r(n)}},this.handleWheel=n=>{const{pan:r,onPan:i,zoom:s,onZoom:o}=this.props;if(!r&&!s)return;const{panInProgress:a}=this.state,c=Math.abs(n.deltaY)>Math.abs(n.deltaX)&&Math.abs(n.deltaY)>0,u=Mt(n);if(n.preventDefault(),s&&this.focus&&c&&!a){const l=n.deltaY>0?1:-1;o!==void 0&&o(l,u,n)}else if(this.focus){if(this.shouldPan()&&this.state.panStart!==void 0){const{panStartXScale:l,chartsToPan:f}=this.state.panStart;this.lastNewPos=u,this.panHappened=!0,this.dx===void 0&&(this.dx=0),this.dy===void 0&&(this.dy=0),this.dx-=n.deltaX,this.dy+=n.deltaY;const h={dx:this.dx,dy:this.dy};i!==void 0&&i(u,l,h,f,n)}else{const{xScale:l,chartConfig:f}=this.props,h=lt(f,u);this.dx=0,this.dy=0,this.setState({panInProgress:!0,panStart:{panStartXScale:l,panOrigin:u,chartsToPan:h}})}this.queuePanEnd(n)}},this.handleMouseMove=n=>{const{onMouseMove:r,mouseMove:i}=this.props;if(r!==void 0&&this.mouseInteraction&&i&&!this.state.panInProgress){const s=mt(n,this.ref.current);r(s,"mouse",n)}},this.handleClick=n=>{const r=Mt(n),{onClick:i,onDoubleClick:s}=this.props;!this.panHappened&&!this.dragHappened&&(this.clicked&&s!==void 0?(s(r,n),this.clicked=!1):i!==void 0&&(i(r,n),this.clicked=!0,setTimeout(()=>{this.clicked&&(this.clicked=!1)},400)))},this.handleRightClick=n=>{n.stopPropagation(),n.preventDefault();const{onContextMenu:r,onPanEnd:i}=this.props,s=Mt(n,this.ref.current.getBoundingClientRect());if(this.state.panStart!==void 0){const{panStartXScale:o,panOrigin:[a,c],chartsToPan:u}=this.state.panStart;this.panHappened&&i!==void 0&&i(s,o,{dx:a,dy:c},u,n);const l=X(this.ref.current);W(l).on(J,null).on(ot,null),this.setState({panInProgress:!1,panStart:void 0})}r!==void 0&&r(s,n)},this.handleDrag=n=>{const{onDrag:r}=this.props;if(r===void 0)return;this.dragHappened=!0;const{dragStartPosition:i}=this.state;if(i===void 0)return;const s=mt(n,this.ref.current);r({startPos:i,mouseXY:s},n)},this.handleDragEnd=n=>{const r=mt(n,this.ref.current),i=X(this.ref.current);if(W(i).on(J,this.mouseInside?this.handleMouseMove:null).on(ot,null),this.dragHappened){const{onDragComplete:s}=this.props;s!==void 0&&s({mouseXY:r},n)}this.setState({dragInProgress:!1}),this.mouseInteraction=!0},this.canPan=()=>{const{getAllPanConditions:n}=this.props,{pan:r}=this.props,{panEnabled:i,draggable:s}=n().reduce((o,a)=>({draggable:o.draggable||a.draggable,panEnabled:o.panEnabled&&a.panEnabled}),{draggable:!1,panEnabled:r});return{panEnabled:i,somethingSelected:s}},this.handleMouseDown=n=>{if(n.button!==0)return;const{xScale:r,chartConfig:i,onMouseDown:s}=this.props;if(this.panHappened=!1,this.dragHappened=!1,this.focus=!0,!this.state.panInProgress&&this.mouseInteraction){const o=Mt(n),a=lt(i,o),{panEnabled:c,somethingSelected:u}=this.canPan(),l=c&&!u;if(l){this.setState({panInProgress:l,panStart:{panStartXScale:r,panOrigin:o,chartsToPan:a}});const f=X(this.ref.current);W(f).on(J,this.handlePan).on(ot,this.handlePanEnd)}else if(u){this.setState({panInProgress:!1,dragInProgress:!0,panStart:void 0,dragStartPosition:o});const{onDragStart:f}=this.props;f!==void 0&&f({startPos:o},n);const h=X(this.ref.current);W(h).on(J,this.handleDrag).on(ot,this.handleDragEnd)}s!==void 0&&s(o,a,n)}n.preventDefault()},this.shouldPan=()=>{const{pan:n,onPan:r}=this.props;return n&&r&&this.state.panStart!==void 0},this.handlePan=n=>{if(this.shouldPan()&&this.state.panStart!==void 0){this.panHappened=!0;const{panStartXScale:r,panOrigin:i,chartsToPan:s}=this.state.panStart;let o,a,c;this.mouseInteraction?(c=mt(n,this.ref.current),this.lastNewPos=c,o=c[0]-i[0],a=c[1]-i[1]):(c=Hn(n,this.ref.current)[0],this.lastNewPos=c,o=i[0]-c[0],a=i[1]-c[1]),this.dx=o,this.dy=a;const{onPan:u}=this.props;u!==void 0&&u(c,r,{dx:o,dy:a},s,n)}},this.handlePanEnd=n=>{const{pan:r,onPanEnd:i}=this.props;if(this.state.panStart!==void 0){const{panStartXScale:s,chartsToPan:o}=this.state.panStart,a=X(this.ref.current);if(W(a).on(J,this.mouseInside?this.handleMouseMove:null).on(ot,null).on(St,null).on(Pt,null),this.panHappened&&r&&i){const{dx:c=0,dy:u=0}=this;delete this.dx,delete this.dy,this.lastNewPos!==void 0&&i(this.lastNewPos,s,{dx:c,dy:u},o,n)}this.setState({panInProgress:!1,panStart:void 0})}},this.handleTouchMove=n=>{const{onMouseMove:r}=this.props;if(r===void 0)return;const i=Ht(n.touches[0]),s=Ut(i,n);r(s,"touch",n)},this.handleTouchStart=n=>{this.mouseInteraction=!1;const{pan:r,chartConfig:i,onMouseMove:s,xScale:o,onPanEnd:a}=this.props;if(n.touches.length===1){this.panHappened=!1;const c=Ut(Ht(n.touches[0]),n);if(s!==void 0&&s(c,"touch",n),r){const u=lt(i,c);this.setState({panInProgress:!0,panStart:{panStartXScale:o,panOrigin:c,chartsToPan:u}});const l=X(this.ref.current);W(l).on(St,this.handlePan,!1).on(Pt,this.handlePanEnd,!1)}}else if(n.touches.length===2){const{panInProgress:c,panStart:u}=this.state;if(c&&r&&a&&u!==void 0){const{panStartXScale:l,panOrigin:[f,h],chartsToPan:p}=u,m=X(this.ref.current);W(m).on(J,this.mouseInside?this.handleMouseMove:null).on(ot,null).on(St,this.handlePinchZoom,!1).on(Pt,this.handlePinchZoomEnd,!1);const d=Ut(Ht(n.touches[0]),n),y=Ut(Ht(n.touches[1]),n);this.panHappened&&r&&a&&this.lastNewPos!==void 0&&a(this.lastNewPos,l,{dx:f,dy:h},p,n),this.setState({panInProgress:!1,pinchZoomStart:{xScale:o,touch1Pos:d,touch2Pos:y,range:o.range(),chartsToPan:p}})}}},this.handlePinchZoom=n=>{const{pinchZoomStart:r}=this.state;if(r===void 0)return;const{xScale:i,zoom:s,onPinchZoom:o}=this.props;if(!s||o===void 0)return;const[a,c]=Hn(this.ref.current),{chartsToPan:u,...l}=r;o(l,{touch1Pos:a,touch2Pos:c,xScale:i},n)},this.handlePinchZoomEnd=n=>{const r=X(this.ref.current);W(r).on(St,null).on(Pt,null);const{pinchZoomStart:i}=this.state;if(i===void 0)return;const{chartsToPan:s,...o}=i,{zoom:a,onPinchZoomEnd:c}=this.props;a&&c&&c(o,n),this.setState({pinchZoomStart:void 0})},this.setCursorClass=n=>{n!==this.state.cursorOverrideClass&&this.setState({cursorOverrideClass:n===null?void 0:n})},this.focus=e.focus,this.state={panInProgress:!1}}componentDidMount(){const{disableInteraction:e}=this.props,{current:n}=this.ref;n!==null&&(e||(W(n).on(_n,this.handleEnter).on(Sn,this.handleLeave),n.addEventListener("wheel",this.handleWheel,{passive:!1})))}componentDidUpdate(){this.componentDidMount()}componentWillUnmount(){const{disableInteraction:e}=this.props,{current:n}=this.ref;if(n!==null&&!e){W(n).on(_n,null).on(Sn,null);const r=X(n);W(r).on(J,null),n.removeEventListener("wheel",this.handleWheel,{passive:!1})}}queuePanEnd(e){this.panEndTimeout!==void 0&&window.clearTimeout(this.panEndTimeout),this.panEndTimeout=window.setTimeout(()=>{this.handlePanEnd(e)},100)}cancelDrag(){const e=X(this.ref.current);W(e).on(J,this.mouseInside?this.handleMouseMove:null).on(ot,null),this.setState({dragInProgress:!1}),this.mouseInteraction=!0}render(){const{height:e,width:n,disableInteraction:r,useCrossHairStyleCursor:i}=this.props,s=r?void 0:this.state.cursorOverrideClass!==void 0?this.state.cursorOverrideClass:i?this.state.panInProgress?"react-financial-charts-grabbing-cursor":"react-financial-charts-crosshair-cursor":void 0,o=r?void 0:{onMouseDown:this.handleMouseDown,onClick:this.handleClick,onContextMenu:this.handleRightClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove};return L.jsx("rect",{ref:this.ref,className:s,width:n,height:e,style:{opacity:0},...o})}}zr.defaultProps={mouseMove:!1,zoom:!1,pan:!1,panSpeedMultiplier:1,focus:!1,disableInteraction:!1};class dc extends z.PureComponent{constructor(){super(...arguments),this.bgRef=z.createRef(),this.axesRef=z.createRef(),this.mouseRef=z.createRef()}getCanvasContexts(){var e,n,r;return{bg:((e=this.bgRef.current)==null?void 0:e.getContext("2d"))??void 0,axes:((n=this.axesRef.current)==null?void 0:n.getContext("2d"))??void 0,mouseCoord:((r=this.mouseRef.current)==null?void 0:r.getContext("2d"))??void 0}}render(){const{height:e,ratio:n,style:r,width:i}=this.props,s=i*n,o=e*n,a={position:"absolute",width:i,height:e};return L.jsxs("div",{style:{...r,position:"absolute"},children:[L.jsx("canvas",{ref:this.bgRef,width:s,height:o,style:a}),L.jsx("canvas",{ref:this.axesRef,width:s,height:o,style:a}),L.jsx("canvas",{ref:this.mouseRef,width:s,height:o,style:a})]})}}function Un(t,e,n,r){const{lastItem:i,lastItemX:s}=t,o=e(i),[a,c]=n.range();return(c-a)/(s.valueOf()-a)*(o.valueOf()-r.valueOf())+r.valueOf()}function pc(t,e,n,r,i){function s(o,a,c,u,{currentPlotData:l,currentDomain:f,fallbackStart:h,fallbackEnd:p,ignoreThresholds:m=!1}={}){if(t)return{plotData:o,domain:a};let d=Y(a),y=U(a),g=a,x=De(o,d,y,c);x.length===1&&h!==void 0&&(d=h,y=Un(p,c,u,d),g=[d,y],x=De(o,d,y,c)),typeof e=="function"?g=e(g,[c(Y(o)),c(U(o))]):((e==="left"||e==="both"||e===!0)&&(g=[gr([d,c(Y(o))]),g[1]]),(e==="right"||e==="both"||e===!0)&&(g=[g[0],qe([y,c(U(o))])])),g!==a&&(x=De(o,g[0],g[1],c));const w=g,b=u.copy().domain(w);let C=Math.floor(b(c(U(x)))-b(c(Y(x))));i&&C<0&&(C=C*-1);let D,N;const E=U(b.range())-Y(b.range());if(m&&x.length>1||gc(C,x.length,n,r))D=x,N=w;else if(E>tn(C,n)&&K(p)){D=x;const _=Un(p,c,u,Y(w));N=[Y(w),_]}else D=l??x.slice(x.length-yc(C,n)),N=f??[c(Y(D)),c(U(D))];return{plotData:D,domain:N}}return{filterData:s}}function gc(t,e,n,r){const i=mc(t,r),s=tn(t,n);return e>=i&&e<s}function mc(t,e){return Math.max(1,Math.ceil(t*e))}function tn(t,e){return Math.floor(t*e)}function yc(t,e){return Math.floor(tn(t,e)*.97)}function De(t,e,n,r){const i=ze(t,e,r).left,s=ze(t,n,r).right;return t.slice(i,s+1)}function xc({xScale:t,useWholeData:e,clamp:n,pointsPerPxThreshold:r,minPointsPerPxThreshold:i,flipXScale:s}){return pc(e||Ve(t.invert),n,r,i,s)}const vc=["seriesName"],wc=(t,e)=>!vc.every(n=>ue(t[n],e[n])),bc=()=>L.jsx("style",{type:"text/css",children:`
	.react-financial-charts-grabbing-cursor {
		pointer-events: all;
		cursor: -moz-grabbing;
		cursor: -webkit-grabbing;
		cursor: grabbing;
	}
	.react-financial-charts-crosshair-cursor {
		pointer-events: all;
		cursor: crosshair;
	}
	.react-financial-charts-tooltip-hover {
		pointer-events: all;
		cursor: pointer;
	}
	.react-financial-charts-avoid-interaction {
		pointer-events: none;
	}
	.react-financial-charts-enable-interaction {
		pointer-events: all;
	}
	.react-financial-charts-tooltip {
		pointer-events: all;
		cursor: pointer;
	}
	.react-financial-charts-default-cursor {
		cursor: default;
	}
	.react-financial-charts-move-cursor {
		cursor: move;
	}
	.react-financial-charts-pointer-cursor {
		cursor: pointer;
	}
	.react-financial-charts-ns-resize-cursor {
		cursor: ns-resize;
	}
	.react-financial-charts-ew-resize-cursor {
		cursor: ew-resize;
	}`}),Rt=()=>{},Fr={amIOnTop:()=>!1,chartConfigs:[],chartId:0,ratio:0,displayXAccessor:()=>0,fullData:[],generateSubscriptionId:()=>Math.random(),getMutableState:()=>({}),height:0,margin:{top:0,right:0,bottom:0,left:0},plotData:[],setCursorClass:Rt,subscribe:Rt,unsubscribe:Rt,redraw:Rt,width:0,xAccessor:()=>0,xScale:Rt},en=z.createContext(Fr),Vt=t=>{const{margin:e,height:n,width:r}=t;return{height:n-e.top-e.bottom,width:r-e.left-e.right}},Or=t=>t?-1:1,Rr=t=>{const{data:e,plotFull:n,xScale:r,clamp:i,pointsPerPxThreshold:s,flipXScale:o,xAccessor:a,displayXAccessor:c,minPointsPerPxThreshold:u}=t,l=n!==void 0?n:a===Zt,{filterData:f}=xc({xScale:r,useWholeData:l,clamp:i,pointsPerPxThreshold:s,minPointsPerPxThreshold:u,flipXScale:o});return{xAccessor:a,displayXAccessor:c??a,xScale:r.copy(),fullData:e,filterData:f}},Wn=t=>{const e=_c(t),{xAccessor:n,displayXAccessor:r,fullData:i,plotData:s,xScale:o,originalXExtents:a}=e,{postCalculator:c,children:u}=t,l=c!==void 0?c(s):s,f=Vt(t),h=$t(br(f,u),{plotData:l,xAccessor:n,displayXAccessor:r,fullData:i},o.domain());return{...e,xScale:o,plotData:l,chartConfigs:h,originalXExtents:a}},Cc=(t,e,n,r,i)=>{const{fullData:s,xScale:o,xAccessor:a,displayXAccessor:c,filterData:u}=t,l=U(s),f=a(l),[h,p]=e.domain(),{postCalculator:m,children:d,padding:y,flipXScale:g,maintainPointsPerPixelOnResize:x}=n,w=Or(g),b=Vt(n),C=Lr(o,b,y,w);let D;if(!r||p>=f){const[_,k]=e.range(),[S,T]=C.range(),M=(T-S)/(k-_)*(p.valueOf()-h.valueOf()),H=x?p.valueOf()-M:h,Z=e(f),O=u(s,[H,p],a,C,{fallbackStart:h,fallbackEnd:{lastItem:l,lastItemX:Z}});D=O.plotData,C.domain(O.domain)}else if(r&&p<f){const _=e(f)-e.range()[1],[k,S]=e.range().map(M=>M+_).map(M=>e.invert(M)),T=u(s,[k,S],a,C);D=T.plotData,C.domain(T.domain)}const N=m(D),E=$t(br(b,d,i),{plotData:N,xAccessor:a,displayXAccessor:c,fullData:s},C.domain());return{xScale:C,xAccessor:a,chartConfigs:E,plotData:N,fullData:s,filterData:u}},_c=t=>{const{xAccessor:e,xExtents:n,data:r,padding:i,flipXScale:s}=t,o=Or(s),a=Vt(t),c=typeof n=="function"?n(r):pr(n.map(g=>Xt(g)).map(g=>g(r,e))),{xAccessor:u,displayXAccessor:l,xScale:f,fullData:h,filterData:p}=Rr(t),m=Lr(f,a,i,o),{plotData:d,domain:y}=p(h,c,e,m);return{plotData:d,xScale:m.domain(y),xAccessor:u,displayXAccessor:l,fullData:h,filterData:p,originalXExtents:c}},Lr=(t,e,n,r=1)=>{if(t.rangeRoundPoints){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.rangeRoundPoints([0,e.width],n)}else if(t.padding){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.range([0,e.width]),t.padding(n/2)}else{const{left:i,right:s}=isNaN(n)?n:{left:n,right:n};r>0?t.range([i,e.width-s]):t.range([e.width-s,i])}return t},Yn=t=>{const{touch1Pos:e,touch2Pos:n}=t;return{topLeft:[Math.min(e[0],n[0]),Math.min(e[1],n[1])],bottomRight:[Math.max(e[0],n[0]),Math.max(e[1],n[1])]}},$n=(t,e,n)=>!isNaN(t(e(Y(n))))&&K(t.invert);class st extends z.Component{constructor(e){super(e),this.canvasContainerRef=z.createRef(),this.eventCaptureRef=z.createRef(),this.lastSubscriptionId=0,this.mutableState={mouseXY:[0,0],currentCharts:[],currentItem:null},this.panInProgress=!1,this.subscriptions=[],this.getMutableState=()=>this.mutableState,this.getCanvasContexts=()=>{var n;return(n=this.canvasContainerRef.current)==null?void 0:n.getCanvasContexts()},this.generateSubscriptionId=()=>(this.lastSubscriptionId++,this.lastSubscriptionId),this.subscribe=(n,r)=>{const{getPanConditions:i=Xt({draggable:!1,panEnabled:!0})}=r;this.subscriptions=this.subscriptions.concat({id:n,...r,getPanConditions:i})},this.unsubscribe=n=>{this.subscriptions=this.subscriptions.filter(r=>r.id!==n)},this.getAllPanConditions=()=>this.subscriptions.map(n=>n.getPanConditions()),this.setCursorClass=n=>{var r;(r=this.eventCaptureRef.current)==null||r.setCursorClass(n)},this.amIOnTop=n=>{const r=this.subscriptions.filter(i=>i.getPanConditions().draggable);return r.length>0&&U(r).id===n},this.handleContextMenu=(n,r)=>{const{xAccessor:i,chartConfigs:s,plotData:o,xScale:a}=this.state,c=lt(s,n),u=pt(a,i,n,o);this.triggerEvent("contextmenu",{mouseXY:n,currentItem:u,currentCharts:c},r)},this.calculateStateForDomain=n=>{const{xAccessor:r,displayXAccessor:i,xScale:s,chartConfigs:o,plotData:a}=this.state,{filterData:c,fullData:u}=this.state,{postCalculator:l=st.defaultProps.postCalculator}=this.props,{plotData:f,domain:h}=c(u,n,r,s,{currentPlotData:a,currentDomain:s.domain()}),p=l(f),m=s.copy().domain(h),d=$t(o,{plotData:p,xAccessor:r,displayXAccessor:i,fullData:u},m.domain());return{xScale:m,plotData:p,chartConfigs:d}},this.pinchZoomHelper=(n,r)=>{const{xScale:i}=n,{xScale:s,chartConfigs:o,plotData:a,xAccessor:c,displayXAccessor:u,filterData:l,fullData:f}=this.state,{postCalculator:h=st.defaultProps.postCalculator}=this.props,{topLeft:p,bottomRight:m}=Yn(n),{topLeft:d,bottomRight:y}=Yn(r),g=i.range()[1],x=Math.round(-(m[0]*d[0]-p[0]*y[0])/(p[0]-m[0])),w=Math.round(g+((g-m[0])*(g-d[0])-(g-p[0])*(g-y[0]))/(g-p[0]-(g-m[0]))),b=Math.round(-x*p[0]/(-x+d[0])),C=Math.round(g-(w-g)*(g-p[0])/(w+(g-d[0]))),D=[b,C].map(i.invert),{plotData:N,domain:E}=l(f,D,c,i,{currentPlotData:a,currentDomain:s.domain()}),_=h(N),k=s.copy().domain(E),S=r.touch1Pos,T=$t(o,{plotData:_,xAccessor:c,displayXAccessor:u,fullData:f},k.domain()),M=pt(k,c,S,_);return{chartConfigs:T,xScale:k,plotData:_,mouseXY:S,currentItem:M,xAccessor:c,fullData:f}},this.handlePinchZoom=(n,r,i)=>{if(!this.waitingForPinchZoomAnimationFrame){this.waitingForPinchZoomAnimationFrame=!0;const s=this.pinchZoomHelper(n,r);this.triggerEvent("pinchzoom",s,i),this.finalPinch=r,requestAnimationFrame(()=>{this.clearBothCanvas(),this.draw({trigger:"pinchzoom"}),this.waitingForPinchZoomAnimationFrame=!1})}},this.handlePinchZoomEnd=(n,r)=>{const{xAccessor:i=st.defaultProps.xAccessor}=this.state;if(this.finalPinch){const s=this.pinchZoomHelper(n,this.finalPinch),{xScale:o,fullData:a}=s;this.triggerEvent("pinchzoom",s,r),this.finalPinch=void 0,this.clearThreeCanvas();const c=Y(a),u=Y(o.domain()),l=i(c),f=U(a),h=U(o.domain()),p=i(f),{onLoadAfter:m,onLoadBefore:d}=this.props;this.setState(s,()=>{u<l&&d!==void 0&&d(u,l),p<h&&m!==void 0&&m(p,h)})}},this.handleZoom=(n,r,i)=>{if(this.panInProgress)return;const{xAccessor:s,xScale:o,plotData:a,fullData:c}=this.state,{zoomMultiplier:u=st.defaultProps.zoomMultiplier,zoomAnchor:l=st.defaultProps.zoomAnchor}=this.props,f=l({xScale:o,xAccessor:s,mouseXY:r,plotData:a}),h=o(f),p=n>0?1*u:1/u,m=o.range().map(T=>h+(T-h)*p).map(T=>o.invert(T)),{xScale:d,plotData:y,chartConfigs:g}=this.calculateStateForDomain(m),x=pt(d,s,r,y),w=lt(g,r);this.clearThreeCanvas();const b=Y(c),C=Y(d.domain()),D=s(b),N=U(c),E=U(d.domain()),_=s(N);this.mutableState={mouseXY:r,currentItem:x,currentCharts:w},this.triggerEvent("zoom",{xScale:d,plotData:y,chartConfigs:g,mouseXY:r,currentCharts:w,currentItem:x,show:!0},i);const{onLoadAfter:k,onLoadBefore:S}=this.props;this.setState({xScale:d,plotData:y,chartConfigs:g},()=>{C<D&&S!==void 0&&S(C,D),_<E&&k!==void 0&&k(_,E)})},this.xAxisZoom=n=>{const{xScale:r,plotData:i,chartConfigs:s}=this.calculateStateForDomain(n);this.clearThreeCanvas();const{xAccessor:o,fullData:a}=this.state,c=Y(a),u=Y(r.domain()),l=o(c),f=U(a),h=U(r.domain()),p=o(f),{onLoadAfter:m,onLoadBefore:d}=this.props;this.setState({xScale:r,plotData:i,chartConfigs:s},()=>{u<l&&d!==void 0&&d(u,l),p<h&&m!==void 0&&m(p,h)})},this.yAxisZoom=(n,r)=>{this.clearThreeCanvas();const{chartConfigs:i}=this.state,s=i.map(o=>{if(o.id===n){const{yScale:a}=o;return{...o,yScale:a.copy().domain(r),yPanEnabled:!0}}else return o});this.setState({chartConfigs:s})},this.draw=n=>{this.subscriptions.forEach(r=>{K(r.draw)&&r.draw(n)})},this.redraw=()=>{this.clearThreeCanvas(),this.draw({force:!0})},this.panHelper=(n,r,{dx:i,dy:s},o)=>{const{xAccessor:a,displayXAccessor:c,chartConfigs:u,filterData:l,fullData:f}=this.state,{postCalculator:h=st.defaultProps.postCalculator}=this.props,p=r.range().map(C=>C-i).map(C=>r.invert(C)),{plotData:m,domain:d}=l(f,p,a,r,{currentPlotData:this.hackyWayToStopPanBeyondBounds__plotData,currentDomain:this.hackyWayToStopPanBeyondBounds__domain,ignoreThresholds:!0}),y=r.copy().domain(d),g=h(m),x=pt(y,a,n,g),w=$t(u,{plotData:g,xAccessor:a,displayXAccessor:c,fullData:f},y.domain(),s,o),b=lt(w,n);return{xScale:y,plotData:g,chartConfigs:w,mouseXY:n,currentCharts:b,currentItem:x}},this.handlePan=(n,r,i,s,o)=>{if(this.waitingForPanAnimationFrame)return;this.waitingForPanAnimationFrame=!0,this.hackyWayToStopPanBeyondBounds__plotData=this.hackyWayToStopPanBeyondBounds__plotData??this.state.plotData,this.hackyWayToStopPanBeyondBounds__domain=this.hackyWayToStopPanBeyondBounds__domain??this.state.xScale.domain();const a=this.panHelper(n,r,i,s);this.hackyWayToStopPanBeyondBounds__plotData=a.plotData,this.hackyWayToStopPanBeyondBounds__domain=a.xScale.domain(),this.panInProgress=!0,this.triggerEvent("pan",a,o),this.mutableState={mouseXY:a.mouseXY,currentItem:a.currentItem,currentCharts:a.currentCharts},requestAnimationFrame(()=>{this.waitingForPanAnimationFrame=!1,this.clearBothCanvas(),this.draw({trigger:"pan"})})},this.handlePanEnd=(n,r,i,s,o)=>{const a=this.panHelper(n,r,i,s);this.hackyWayToStopPanBeyondBounds__plotData=null,this.hackyWayToStopPanBeyondBounds__domain=null,this.panInProgress=!1;const{xScale:c,plotData:u,chartConfigs:l}=a;this.triggerEvent("panend",a,o),requestAnimationFrame(()=>{const{xAccessor:f,fullData:h}=this.state,p=Y(h),m=Y(c.domain()),d=f(p),y=U(h),g=U(c.domain()),x=f(y),{onLoadAfter:w,onLoadBefore:b}=this.props;this.clearThreeCanvas(),this.setState({xScale:c,plotData:u,chartConfigs:l},()=>{m<d&&b!==void 0&&b(m,d),x<g&&w!==void 0&&w(x,g)})})},this.handleMouseDown=(n,r,i)=>{this.triggerEvent("mousedown",this.mutableState,i)},this.handleMouseEnter=n=>{this.triggerEvent("mouseenter",{show:!0},n)},this.handleMouseMove=(n,r,i)=>{if(this.waitingForMouseMoveAnimationFrame)return;this.waitingForMouseMoveAnimationFrame=!0;const{chartConfigs:s,plotData:o,xScale:a,xAccessor:c}=this.state,u=lt(s,n),l=pt(a,c,n,o);this.triggerEvent("mousemove",{show:!0,mouseXY:n,prevMouseXY:this.prevMouseXY,currentItem:l,currentCharts:u},i),this.prevMouseXY=n,this.mutableState={mouseXY:n,currentItem:l,currentCharts:u},requestAnimationFrame(()=>{this.clearMouseCanvas(),this.draw({trigger:"mousemove"}),this.waitingForMouseMoveAnimationFrame=!1})},this.handleMouseLeave=n=>{this.triggerEvent("mouseleave",{show:!1},n),this.clearMouseCanvas(),this.draw({trigger:"mouseleave"})},this.handleDragStart=({startPos:n},r)=>{this.triggerEvent("dragstart",{startPos:n},r)},this.handleDrag=({startPos:n,mouseXY:r},i)=>{const{chartConfigs:s,plotData:o,xScale:a,xAccessor:c}=this.state,u=lt(s,r),l=pt(a,c,r,o);this.triggerEvent("drag",{startPos:n,mouseXY:r,currentItem:l,currentCharts:u},i),this.mutableState={mouseXY:r,currentItem:l,currentCharts:u},requestAnimationFrame(()=>{this.clearMouseCanvas(),this.draw({trigger:"drag"})})},this.handleDragEnd=({mouseXY:n},r)=>{this.triggerEvent("dragend",{mouseXY:n},r),requestAnimationFrame(()=>{this.clearMouseCanvas(),this.draw({trigger:"dragend"})})},this.handleClick=(n,r)=>{this.triggerEvent("click",this.mutableState,r),requestAnimationFrame(()=>{this.clearMouseCanvas(),this.draw({trigger:"click"})})},this.handleDoubleClick=(n,r)=>{this.triggerEvent("dblclick",{},r)},this.resetYDomain=n=>{const{chartConfigs:r}=this.state;let i=!1;const s=r.map(o=>(Ve(n)||o.id===n)&&!ue(o.yScale.domain(),o.realYDomain)?(i=!0,{...o,yScale:o.yScale.domain(o.realYDomain),yPanEnabled:!1}):o);i&&(this.clearThreeCanvas(),this.setState({chartConfigs:s}))},this.state=Wn(e)}static getDerivedStateFromProps(e,n){var l;const{chartConfigs:r,plotData:i,xAccessor:s,xScale:o}=n,a=$n(o,s,i),c=wc(n.lastProps||{},e);let u;if(!a||c||!ue((l=n.lastProps)==null?void 0:l.xExtents,e.xExtents))u=Wn(e);else{const[f,h]=o.domain(),p=U(n.fullData),m=Rr(e),{xAccessor:d}=m,y=d(p),g=y<=h&&y>=f;u=Cc(m,o,e,g,r)}return{...u,lastProps:e,propIteration:(n.propIteration||0)+1}}getSnapshotBeforeUpdate(e,n){return n.propIteration!==this.state.propIteration&&!this.panInProgress&&this.clearThreeCanvas(),null}componentDidUpdate(e){e.data!==this.props.data&&this.triggerEvent("dataupdated",{chartConfigs:this.state.chartConfigs,xScale:this.state.xScale,plotData:this.state.plotData})}clearBothCanvas(){const e=this.getCanvasContexts();e&&e.axes&&e.mouseCoord&&_e([e.axes,e.mouseCoord],this.props.ratio)}clearMouseCanvas(){const e=this.getCanvasContexts();e&&e.mouseCoord&&_e([e.mouseCoord],this.props.ratio)}clearThreeCanvas(){const e=this.getCanvasContexts();e&&e.axes&&e.mouseCoord&&e.bg&&_e([e.axes,e.mouseCoord,e.bg],this.props.ratio)}cancelDrag(){var e;(e=this.eventCaptureRef.current)==null||e.cancelDrag(),this.triggerEvent("dragcancel")}triggerEvent(e,n,r){this.subscriptions.forEach(i=>{const s={...this.state,subscriptions:this.subscriptions};i.listener(e,n,s,r)})}getContextValues(){const e=Vt(this.props);return{chartId:-1,fullData:this.state.fullData,plotData:this.state.plotData,width:e.width,height:e.height,chartConfigs:this.state.chartConfigs,xScale:this.state.xScale,xAccessor:this.state.xAccessor,displayXAccessor:this.state.displayXAccessor,margin:this.props.margin,ratio:this.props.ratio,xAxisZoom:this.xAxisZoom,yAxisZoom:this.yAxisZoom,getCanvasContexts:this.getCanvasContexts,redraw:this.redraw,subscribe:this.subscribe,unsubscribe:this.unsubscribe,generateSubscriptionId:this.generateSubscriptionId,getMutableState:this.getMutableState,amIOnTop:this.amIOnTop,setCursorClass:this.setCursorClass,originalXExtents:this.state.originalXExtents}}shouldComponentUpdate(){return!this.panInProgress}render(){const{disableInteraction:e,disablePan:n,disableZoom:r,useCrossHairStyleCursor:i,onClick:s,onDoubleClick:o,height:a,width:c,margin:u=st.defaultProps.margin,className:l,zIndex:f=st.defaultProps.zIndex,defaultFocus:h,ratio:p,mouseMoveEvent:m}=this.props,{plotData:d,xScale:y,xAccessor:g,chartConfigs:x}=this.state,w=Vt(this.props),b=$n(y,g,d),C=i&&b,D=bc();return L.jsx(en.Provider,{value:this.getContextValues(),children:L.jsxs("div",{style:{position:"relative",width:c,height:a},className:l,onClick:s,onDoubleClick:o,children:[L.jsx(dc,{ref:this.canvasContainerRef,ratio:p,width:c,height:a,style:{height:a,zIndex:f,width:c}}),L.jsxs("svg",{className:l,width:c,height:a,style:{position:"absolute",zIndex:f+5},children:[D,L.jsxs("defs",{children:[L.jsx("clipPath",{id:"chart-area-clip",children:L.jsx("rect",{x:"0",y:"0",width:w.width,height:w.height})}),x.map((N,E)=>L.jsx("clipPath",{id:`chart-area-clip-${N.id}`,children:L.jsx("rect",{x:"0",y:"0",width:N.width,height:N.height})},E))]}),L.jsxs("g",{transform:`translate(${u.left+.5}, ${u.top+.5})`,children:[L.jsx(zr,{ref:this.eventCaptureRef,useCrossHairStyleCursor:C,mouseMove:m&&b,zoom:!r&&b,pan:!n&&b,width:w.width,height:w.height,chartConfig:x,xScale:y,xAccessor:g,focus:h,disableInteraction:e,getAllPanConditions:this.getAllPanConditions,onContextMenu:this.handleContextMenu,onClick:this.handleClick,onDoubleClick:this.handleDoubleClick,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onDragStart:this.handleDragStart,onDrag:this.handleDrag,onDragComplete:this.handleDragEnd,onZoom:this.handleZoom,onPinchZoom:this.handlePinchZoom,onPinchZoomEnd:this.handlePinchZoomEnd,onPan:this.handlePan,onPanEnd:this.handlePanEnd}),L.jsx("g",{className:"react-financial-charts-avoid-interaction",children:this.props.children})]})]})]})})}}st.defaultProps={clamp:!1,className:"react-financial-charts",defaultFocus:!0,disablePan:!1,disableInteraction:!1,disableZoom:!1,flipXScale:!1,maintainPointsPerPixelOnResize:!0,margin:{top:0,right:40,bottom:40,left:0},minPointsPerPxThreshold:1/100,mouseMoveEvent:!0,postCalculator:Zt,padding:0,pointsPerPxThreshold:2,useCrossHairStyleCursor:!0,xAccessor:Zt,xExtents:[qe,gr],zIndex:1,zoomAnchor:Eo,zoomMultiplier:1.1};const me=z.createContext({...Fr,chartConfig:{},chartId:0}),Sc=z.memo(t=>{const{id:e=0,onContextMenu:n,onDoubleClick:r}=t,i=z.useContext(en),{subscribe:s,unsubscribe:o,chartConfigs:a}=i,c=z.useCallback((p,m,d,y)=>{switch(p){case"contextmenu":{if(n===void 0)return;const{currentCharts:g}=m;g.indexOf(e)>-1&&n(y,m);break}case"dblclick":{if(r===void 0)return;const{currentCharts:g}=m;g.indexOf(e)>-1&&r(y,m);break}}},[n,r,e]);z.useEffect(()=>(s(`chart_${e}`,{listener:c}),()=>o(`chart_${e}`)),[s,o,e,c]);const u=a.find(({id:p})=>p===t.id),l=z.useMemo(()=>({...i,chartId:e,chartConfig:u}),[e,u,i]),{origin:[f,h]}=u;return L.jsx(me.Provider,{value:l,children:L.jsx("g",{transform:`translate(${f}, ${h})`,id:`chart_${e}`,children:t.children})})});Sc.displayName="Chart";const Zn={mouseleave:"mousemove",panend:"pan",pinchzoom:"pan",mousedown:"mousemove",click:"mousemove",contextmenu:"mousemove",dblclick:"mousemove",dragstart:"drag",dragend:"drag",dragcancel:"drag",zoom:"zoom"};class ye extends z.Component{constructor(e,n){super(e,n),this.moreProps={},this.dragInProgress=!1,this.evaluationInProgress=!1,this.iSetTheCursorClass=!1,this.listener=(i,s,o,a)=>{s!==void 0&&this.updateMoreProps(s),this.evaluationInProgress=!0,this.evaluateType(i,a),this.evaluationInProgress=!1},this.drawOnCanvas=this.drawOnCanvas.bind(this),this.getMoreProps=this.getMoreProps.bind(this),this.draw=this.draw.bind(this),this.updateMoreProps=this.updateMoreProps.bind(this),this.evaluateType=this.evaluateType.bind(this),this.isHover=this.isHover.bind(this),this.preCanvasDraw=this.preCanvasDraw.bind(this),this.postCanvasDraw=this.postCanvasDraw.bind(this),this.getPanConditions=this.getPanConditions.bind(this),this.shouldTypeProceed=this.shouldTypeProceed.bind(this),this.preEvaluate=this.preEvaluate.bind(this);const{generateSubscriptionId:r}=n;this.subscriberId=r(),this.state={updateCount:0}}updateMoreProps(e){Object.keys(e).forEach(n=>{this.moreProps[n]=e[n]})}shouldTypeProceed(e,n){return!0}preEvaluate(e,n,r){}evaluateType(e,n){const r=Zn[e]||e;if(this.props.drawOn.indexOf(r)>-1&&(this.preEvaluate(e,this.moreProps,n),!!this.shouldTypeProceed(e,this.moreProps)))switch(e){case"zoom":{const{canvasDraw:s}=this.props;if(s===void 0){const{updateCount:o}=this.state;this.setState({updateCount:o+1})}break}case"mouseenter":break;case"mouseleave":{this.moreProps.hovering=!1,this.props.onUnHover&&this.props.onUnHover(n,this.getMoreProps());break}case"contextmenu":{this.props.onContextMenu&&this.props.onContextMenu(n,this.getMoreProps()),this.moreProps.hovering&&this.props.onContextMenuWhenHover&&this.props.onContextMenuWhenHover(n,this.getMoreProps());break}case"mousedown":{this.props.onMouseDown&&this.props.onMouseDown(n,this.getMoreProps());break}case"click":{const{onClick:s,onClickOutside:o,onClickWhenHover:a}=this.props,c=this.getMoreProps();c.hovering&&a!==void 0?a(n,c):o!==void 0&&o(n,c),s!==void 0&&s(n,c);break}case"mousemove":{const s=this.moreProps.hovering;this.moreProps.hovering=this.isHover(n);const{amIOnTop:o,setCursorClass:a}=this.context;this.moreProps.hovering&&!this.props.selected&&o(this.subscriberId)&&this.props.onHover!==void 0?(a("react-financial-charts-pointer-cursor"),this.iSetTheCursorClass=!0):this.moreProps.hovering&&this.props.selected&&o(this.subscriberId)?(a(this.props.interactiveCursorClass),this.iSetTheCursorClass=!0):s&&!this.moreProps.hovering&&this.iSetTheCursorClass&&(this.iSetTheCursorClass=!1,a(null));const c=this.getMoreProps();this.moreProps.hovering&&!s&&this.props.onHover&&this.props.onHover(n,c),s&&!this.moreProps.hovering&&this.props.onUnHover&&this.props.onUnHover(n,c),this.props.onMouseMove&&this.props.onMouseMove(n,c);break}case"dblclick":{const s=this.getMoreProps();this.props.onDoubleClick&&this.props.onDoubleClick(n,s),this.moreProps.hovering&&this.props.onDoubleClickWhenHover&&this.props.onDoubleClickWhenHover(n,s);break}case"pan":{this.moreProps.hovering=!1,this.props.onPan&&this.props.onPan(n,this.getMoreProps());break}case"panend":{this.props.onPanEnd&&this.props.onPanEnd(n,this.getMoreProps());break}case"dragstart":{if(this.getPanConditions().draggable){const{amIOnTop:s}=this.context;s(this.subscriberId)&&(this.dragInProgress=!0,this.props.onDragStart!==void 0&&this.props.onDragStart(n,this.getMoreProps()))}break}case"drag":{this.dragInProgress&&this.props.onDrag&&this.props.onDrag(n,this.getMoreProps());break}case"dragend":{this.dragInProgress&&this.props.onDragComplete&&this.props.onDragComplete(n,this.getMoreProps()),this.dragInProgress=!1;break}case"dragcancel":{if(this.dragInProgress||this.iSetTheCursorClass){const{setCursorClass:s}=this.context;s(null)}break}}}isHover(e){const{isHover:n}=this.props;return n===void 0?!1:n(this.getMoreProps(),e)}getPanConditions(){return{draggable:!!(this.props.selected&&this.moreProps.hovering)||this.props.enableDragOnHover&&this.moreProps.hovering,panEnabled:!this.props.disablePan}}draw({trigger:e,force:n=!1}){const r=Zn[e]||e;if(this.props.drawOn.indexOf(r)>-1||this.props.selected||n){const{canvasDraw:s}=this.props;if(s===void 0){const{updateCount:o}=this.state;this.setState({updateCount:o+1})}else this.drawOnCanvas()}}componentWillUnmount(){const{unsubscribe:e}=this.context;if(e(this.subscriberId),this.iSetTheCursorClass){const{setCursorClass:n}=this.context;n(null)}}componentDidMount(){const{subscribe:e,chartId:n}=this.context,{clip:r,edgeClip:i}=this.props;e(this.subscriberId,{chartId:n,clip:r,edgeClip:i,listener:this.listener,draw:this.draw,getPanConditions:this.getPanConditions}),this.updateMorePropsFromContext(this.props,this.context),this.componentDidUpdate(this.props)}componentDidUpdate(e){const{canvasDraw:n,selected:r,interactiveCursorClass:i}=this.props;if(this.updateMorePropsFromContext(this.props,this.context),e.selected!==r){const{setCursorClass:s}=this.context;r&&this.moreProps.hovering?(this.iSetTheCursorClass=!0,s(i)):(this.iSetTheCursorClass=!1,s(null))}n!==void 0&&!this.evaluationInProgress&&(this.updateMoreProps(this.moreProps),this.drawOnCanvas())}updateMorePropsFromContext(e,n){const{xScale:r,plotData:i,chartConfig:s,getMutableState:o}=n;if(o){const a=o();this.moreProps={...this.moreProps,...a,xScale:r,plotData:i,chartConfig:s}}}getMoreProps(){const{xScale:e,plotData:n,chartConfigs:r,morePropsDecorator:i,xAccessor:s,displayXAccessor:o,width:a,height:c}=this.context,{chartId:u,fullData:l}=this.context,f={xScale:e,plotData:n,chartConfigs:r,xAccessor:s,displayXAccessor:o,width:a,height:c,chartId:u,fullData:l,...this.moreProps};return(i||Zt)(f)}preCanvasDraw(e,n){}postCanvasDraw(e,n){}drawOnCanvas(){const{canvasDraw:e,canvasToDraw:n}=this.props;if(e===void 0||n===void 0)return;const{getCanvasContexts:r}=this.context,i=this.getMoreProps(),s=r(),o=n(s);o!==void 0&&(this.preCanvasDraw(o,i),e(o,i),this.postCanvasDraw(o,i))}render(){const{canvasDraw:e,clip:n,svgDraw:r}=this.props;if(e!==void 0||r===void 0)return null;const{chartId:i}=this.context,s=i!==void 0?"-"+i:"",o=n?{clipPath:`url(#chart-area-clip${s})`}:void 0;return L.jsx("g",{style:o,children:r(this.getMoreProps())})}}ye.defaultProps={svgDraw:Xt(null),draw:[],canvasToDraw:t=>t.mouseCoord,clip:!0,edgeClip:!1,selected:!1,disablePan:!1,enableDragOnHover:!1};ye.contextType=en;const Pc=t=>t.axes,Eu=t=>t.mouseCoord,Mc=["drag","dragend"];class nn extends ye{constructor(e,n){super(e,n),this.preCanvasDraw=this.preCanvasDraw.bind(this),this.postCanvasDraw=this.postCanvasDraw.bind(this),this.shouldTypeProceed=this.shouldTypeProceed.bind(this),this.preEvaluate=this.preEvaluate.bind(this),this.updateMoreProps=this.updateMoreProps.bind(this)}preCanvasDraw(e,n){super.preCanvasDraw(e,n),e.save();const{margin:r,ratio:i}=this.context,{chartConfig:{width:s,height:o,origin:a}}=n,c=.5*i+a[0]+r.left,u=.5*i+a[1]+r.top,{clip:l,edgeClip:f}=this.props;e.setTransform(1,0,0,1,0,0),e.scale(i,i),f&&(e.beginPath(),e.rect(-1,u-10,s+r.left+r.right+1,o+20),e.clip()),e.translate(c,u),l&&(e.beginPath(),e.rect(-1,-1,s+1,o+1),e.clip())}postCanvasDraw(e,n){super.postCanvasDraw(e,n),e.restore()}updateMoreProps(e){super.updateMoreProps(e);const{chartConfig:n}=e;if(n&&Array.isArray(n)){const{chartId:r}=this.context,i=n.find(s=>s.id===r);this.moreProps.chartConfig=i}if(K(this.moreProps.chartConfig)){const{origin:[r,i]}=this.moreProps.chartConfig;if(K(e.mouseXY)){const{mouseXY:[s,o]}=e;this.moreProps.mouseXY=[s-r,o-i]}if(K(e.startPos)){const{startPos:[s,o]}=e;this.moreProps.startPos=[s-r,o-i]}}}preEvaluate(){}shouldTypeProceed(e,n){return(e==="mousemove"||e==="click")&&this.props.disablePan?!0:Mc.indexOf(e)===-1&&K(n)&&K(n.currentCharts)?n.currentCharts.indexOf(this.context.chartId)>-1:!0}}nn.defaultProps=ye.defaultProps;nn.contextType=me;function Dc(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function kc(t,e){let n=0,r=0;for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);if(n)return r/n}function Tc(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Ec(t){if(!(s=t.length))return[];for(var e=-1,n=Dc(t,Ac),r=new Array(n);++e<n;)for(var i=-1,s,o=r[e]=new Array(s);++i<s;)o[i]=t[i][e];return r}function Ac(t){return t.length}function Nc(){return Ec(arguments)}function Ic(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Hr(this.cover(e,n),e,n,t)}function Hr(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s=t._root,o={data:r},a=t._x0,c=t._y0,u=t._x1,l=t._y1,f,h,p,m,d,y,g,x;if(!s)return t._root=o,t;for(;s.length;)if((d=e>=(f=(a+u)/2))?a=f:u=f,(y=n>=(h=(c+l)/2))?c=h:l=h,i=s,!(s=s[g=y<<1|d]))return i[g]=o,t;if(p=+t._x.call(null,s.data),m=+t._y.call(null,s.data),e===p&&n===m)return o.next=s,i?i[g]=o:t._root=o,t;do i=i?i[g]=new Array(4):t._root=new Array(4),(d=e>=(f=(a+u)/2))?a=f:u=f,(y=n>=(h=(c+l)/2))?c=h:l=h;while((g=y<<1|d)===(x=(m>=h)<<1|p>=f));return i[x]=s,i[g]=o,t}function zc(t){var e,n,r=t.length,i,s,o=new Array(r),a=new Array(r),c=1/0,u=1/0,l=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(o[n]=i,a[n]=s,i<c&&(c=i),i>l&&(l=i),s<u&&(u=s),s>f&&(f=s));if(c>l||u>f)return this;for(this.cover(c,u).cover(l,f),n=0;n<r;++n)Hr(this,o[n],a[n],t[n]);return this}function Fc(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else{for(var o=i-n||1,a=this._root,c,u;n>t||t>=i||r>e||e>=s;)switch(u=(e<r)<<1|t<n,c=new Array(4),c[u]=a,a=c,o*=2,u){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Oc(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Rc(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function B(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Lc(t,e,n){var r,i=this._x0,s=this._y0,o,a,c,u,l=this._x1,f=this._y1,h=[],p=this._root,m,d;for(p&&h.push(new B(p,i,s,l,f)),n==null?n=1/0:(i=t-n,s=e-n,l=t+n,f=e+n,n*=n);m=h.pop();)if(!(!(p=m.node)||(o=m.x0)>l||(a=m.y0)>f||(c=m.x1)<i||(u=m.y1)<s))if(p.length){var y=(o+c)/2,g=(a+u)/2;h.push(new B(p[3],y,g,c,u),new B(p[2],o,g,y,u),new B(p[1],y,a,c,g),new B(p[0],o,a,y,g)),(d=(e>=g)<<1|t>=y)&&(m=h[h.length-1],h[h.length-1]=h[h.length-1-d],h[h.length-1-d]=m)}else{var x=t-+this._x.call(null,p.data),w=e-+this._y.call(null,p.data),b=x*x+w*w;if(b<n){var C=Math.sqrt(n=b);i=t-C,s=e-C,l=t+C,f=e+C,r=p.data}}return r}function Hc(t){if(isNaN(l=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,s,o=this._x0,a=this._y0,c=this._x1,u=this._y1,l,f,h,p,m,d,y,g;if(!n)return this;if(n.length)for(;;){if((m=l>=(h=(o+c)/2))?o=h:c=h,(d=f>=(p=(a+u)/2))?a=p:u=p,e=n,!(n=n[y=d<<1|m]))return this;if(!n.length)break;(e[y+1&3]||e[y+2&3]||e[y+3&3])&&(r=e,g=y)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):e?(s?e[y]=s:delete e[y],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[g]=n:this._root=n),this):(this._root=s,this)}function Uc(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Wc(){return this._root}function Yc(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function $c(t){var e=[],n,r=this._root,i,s,o,a,c;for(r&&e.push(new B(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,s=n.x0,o=n.y0,a=n.x1,c=n.y1)&&r.length){var u=(s+a)/2,l=(o+c)/2;(i=r[3])&&e.push(new B(i,u,l,a,c)),(i=r[2])&&e.push(new B(i,s,l,u,c)),(i=r[1])&&e.push(new B(i,u,o,a,l)),(i=r[0])&&e.push(new B(i,s,o,u,l))}return this}function Zc(t){var e=[],n=[],r;for(this._root&&e.push(new B(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,c=r.x1,u=r.y1,l=(o+c)/2,f=(a+u)/2;(s=i[0])&&e.push(new B(s,o,a,l,f)),(s=i[1])&&e.push(new B(s,l,a,c,f)),(s=i[2])&&e.push(new B(s,o,f,l,u)),(s=i[3])&&e.push(new B(s,l,f,c,u))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Xc(t){return t[0]}function Bc(t){return arguments.length?(this._x=t,this):this._x}function jc(t){return t[1]}function qc(t){return arguments.length?(this._y=t,this):this._y}function Ur(t,e,n){var r=new rn(e??Xc,n??jc,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function rn(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Xn(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var j=Ur.prototype=rn.prototype;j.copy=function(){var t=new rn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Xn(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Xn(r));return t};j.add=Ic;j.addAll=zc;j.cover=Fc;j.data=Oc;j.extent=Rc;j.find=Lc;j.remove=Hc;j.removeAll=Uc;j.root=Wc;j.size=Yc;j.visit=$c;j.visitAfter=Zc;j.x=Bc;j.y=qc;function kt(t){return function(){return t}}function Bn(t){return(t()-.5)*1e-6}function Vc(t){return t.x+t.vx}function Gc(t){return t.y+t.vy}function Qc(t){var e,n,r,i=1,s=1;typeof t!="function"&&(t=kt(t==null?1:+t));function o(){for(var u,l=e.length,f,h,p,m,d,y,g=0;g<s;++g)for(f=Ur(e,Vc,Gc).visitAfter(a),u=0;u<l;++u)h=e[u],d=n[h.index],y=d*d,p=h.x+h.vx,m=h.y+h.vy,f.visit(x);function x(w,b,C,D,N){var E=w.data,_=w.r,k=d+_;if(E){if(E.index>h.index){var S=p-E.x-E.vx,T=m-E.y-E.vy,M=S*S+T*T;M<k*k&&(S===0&&(S=Bn(r),M+=S*S),T===0&&(T=Bn(r),M+=T*T),M=(k-(M=Math.sqrt(M)))/M*i,h.vx+=(S*=M)*(k=(_*=_)/(y+_)),h.vy+=(T*=M)*k,E.vx-=S*(k=1-k),E.vy-=T*k)}return}return b>p+k||D<p-k||C>m+k||N<m-k}}function a(u){if(u.data)return u.r=n[u.data.index];for(var l=u.r=0;l<4;++l)u[l]&&u[l].r>u.r&&(u.r=u[l].r)}function c(){if(e){var u,l=e.length,f;for(n=new Array(l),u=0;u<l;++u)f=e[u],n[f.index]=+t(f,u,e)}}return o.initialize=function(u,l){e=u,r=l,c()},o.iterations=function(u){return arguments.length?(s=+u,o):s},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(t=typeof u=="function"?u:kt(+u),c(),o):t},o}var Jc={value:()=>{}};function Wr(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ie(n)}function ie(t){this._=t}function Kc(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ie.prototype=Wr.prototype={constructor:ie,on:function(t,e){var n=this._,r=Kc(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=tu(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=jn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=jn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ie(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function tu(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function jn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Jc,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var It=0,Wt=0,Lt=0,Yr=1e3,pe,Yt,ge=0,wt=0,xe=0,Gt=typeof performance=="object"&&performance.now?performance:Date,$r=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Zr(){return wt||($r(eu),wt=Gt.now()+xe)}function eu(){wt=0}function Ue(){this._call=this._time=this._next=null}Ue.prototype=Xr.prototype={constructor:Ue,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Zr():+n)+(e==null?0:+e),!this._next&&Yt!==this&&(Yt?Yt._next=this:pe=this,Yt=this),this._call=t,this._time=n,We()},stop:function(){this._call&&(this._call=null,this._time=1/0,We())}};function Xr(t,e,n){var r=new Ue;return r.restart(t,e,n),r}function nu(){Zr(),++It;for(var t=pe,e;t;)(e=wt-t._time)>=0&&t._call.call(null,e),t=t._next;--It}function qn(){wt=(ge=Gt.now())+xe,It=Wt=0;try{nu()}finally{It=0,iu(),wt=0}}function ru(){var t=Gt.now(),e=t-ge;e>Yr&&(xe-=e,ge=t)}function iu(){for(var t,e=pe,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:pe=n);Yt=t,We(r)}function We(t){if(!It){Wt&&(Wt=clearTimeout(Wt));var e=t-wt;e>24?(t<1/0&&(Wt=setTimeout(qn,t-Gt.now()-xe)),Lt&&(Lt=clearInterval(Lt))):(Lt||(ge=Gt.now(),Lt=setInterval(ru,Yr)),It=1,$r(qn))}}const su=1664525,ou=1013904223,Vn=4294967296;function au(){let t=1;return()=>(t=(su*t+ou)%Vn)/Vn}var cu=10,uu=Math.PI*(3-Math.sqrt(5));function lu(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,c=Xr(f),u=Wr("tick","end"),l=au();t==null&&(t=[]);function f(){h(),u.call("tick",e),n<r&&(c.stop(),u.call("end",e))}function h(d){var y,g=t.length,x;d===void 0&&(d=1);for(var w=0;w<d;++w)for(n+=(s-n)*i,a.forEach(function(b){b(n)}),y=0;y<g;++y)x=t[y],x.fx==null?x.x+=x.vx*=o:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=o:(x.y=x.fy,x.vy=0);return e}function p(){for(var d=0,y=t.length,g;d<y;++d){if(g=t[d],g.index=d,g.fx!=null&&(g.x=g.fx),g.fy!=null&&(g.y=g.fy),isNaN(g.x)||isNaN(g.y)){var x=cu*Math.sqrt(.5+d),w=d*uu;g.x=x*Math.cos(w),g.y=x*Math.sin(w)}(isNaN(g.vx)||isNaN(g.vy))&&(g.vx=g.vy=0)}}function m(d){return d.initialize&&d.initialize(t,l),d}return p(),e={tick:h,restart:function(){return c.restart(f),e},stop:function(){return c.stop(),e},nodes:function(d){return arguments.length?(t=d,p(),a.forEach(m),e):t},alpha:function(d){return arguments.length?(n=+d,e):n},alphaMin:function(d){return arguments.length?(r=+d,e):r},alphaDecay:function(d){return arguments.length?(i=+d,e):+i},alphaTarget:function(d){return arguments.length?(s=+d,e):s},velocityDecay:function(d){return arguments.length?(o=1-d,e):1-o},randomSource:function(d){return arguments.length?(l=d,a.forEach(m),e):l},force:function(d,y){return arguments.length>1?(y==null?a.delete(d):a.set(d,m(y)),e):a.get(d)},find:function(d,y,g){var x=0,w=t.length,b,C,D,N,E;for(g==null?g=1/0:g*=g,x=0;x<w;++x)N=t[x],b=d-N.x,C=y-N.y,D=b*b+C*C,D<g&&(E=N,g=D);return E},on:function(d,y){return arguments.length>1?(u.on(d,y),e):u.on(d)}}}function hu(t){var e=kt(.1),n,r,i;typeof t!="function"&&(t=kt(t==null?0:+t));function s(a){for(var c=0,u=n.length,l;c<u;++c)l=n[c],l.vx+=(i[c]-l.x)*r[c]*a}function o(){if(n){var a,c=n.length;for(r=new Array(c),i=new Array(c),a=0;a<c;++a)r[a]=isNaN(i[a]=+t(n[a],a,n))?0:+e(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:kt(+a),o(),s):e},s.x=function(a){return arguments.length?(t=typeof a=="function"?a:kt(+a),o(),s):t},s}class fu extends z.Component{constructor(e){super(e),this.ref=z.createRef(),this.clicked=!1,this.dragHappened=!1,this.handleDragEnd=n=>{const r=this.ref.current;if(r!==null){if(!this.dragHappened)if(this.clicked){const i=mt(n,r),{onDoubleClick:s}=this.props;s!==void 0&&s(n,i)}else this.clicked=!0,setTimeout(()=>{this.clicked=!1},300);W(X(r)).on(J,null).on(ot,null).on(St,null).on(Pt,null),this.setState({startPosition:null})}},this.handleDrag=n=>{const r=this.ref.current;if(r===null)return;this.dragHappened=!0;const{getMouseDelta:i,inverted:s=!0}=this.props,{startPosition:o}=this.state;if(o!==null){const{startScale:a}=o,{startXY:c}=o,u=mt(n,r),l=i(c,u),f=kc(a.range());if(f===void 0)return;const h=a.range().map(m=>s?m-ee(m-f)*l:m+ee(m-f)*l),p=h.map(a.invert);if(ee(U(a.range())-Fe(a.range()))===ee(U(h)-Fe(h))){const{axisZoomCallback:m}=this.props;m!==void 0&&m(p)}}},this.handleDragStartTouch=n=>{const r=this.ref.current;if(r===null)return;this.dragHappened=!1;const{getScale:i,getMoreProps:s}=this.props,o=s(),a=i(o);if(n.touches.length===1&&a.invert!==void 0){W(X(r)).on(St,this.handleDrag).on(Pt,this.handleDragEnd);const c=Ut(Ht(n.touches[0]),n);this.setState({startPosition:{startScale:a,startXY:c}})}},this.handleDragStartMouse=n=>{n.preventDefault();const r=this.ref.current;if(r===null)return;this.dragHappened=!1;const{getScale:i,getMoreProps:s}=this.props,o=s(),a=i(o);if(a.invert!==void 0){W(X(r)).on(J,this.handleDrag,!1).on(ot,this.handleDragEnd,!1);const c=Mt(n);this.setState({startPosition:{startXY:c,startScale:a}})}},this.handleRightClick=n=>{n.stopPropagation(),n.preventDefault();const r=this.ref.current;if(r===null)return;const{onContextMenu:i}=this.props;if(i===void 0)return;const s=r.getBoundingClientRect(),o=Mt(n,s);W(X(r)).on(J,null).on(ot,null),this.setState({startPosition:null}),i(n,o)},this.state={startPosition:null}}render(){const{bg:e,className:n,zoomCursorClassName:r}=this.props,i=this.state.startPosition!==null?r:"react-financial-charts-default-cursor";return z.createElement("rect",{className:`react-financial-charts-enable-interaction ${i} ${n}`,ref:this.ref,x:e.x,y:e.y,opacity:0,height:e.h,width:e.w,onContextMenu:this.handleRightClick,onMouseDown:this.handleDragStartMouse,onTouchStart:this.handleDragStartTouch})}}var du=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class sn extends z.Component{constructor(){super(...arguments),this.chartRef=z.createRef(),this.getMoreProps=()=>this.chartRef.current.getMoreProps(),this.drawOnCanvas=(e,n)=>{const{showDomain:r,showGridLines:i,showTickLabel:s,showTicks:o,transform:a,range:c,getScale:u,tickLabelFill:l}=this.props;e.save(),e.translate(a[0],a[1]);const f=u(n),h=pu(this.props,f);if(o&&mu(e,h),i&&h.ticks.forEach(p=>{yu(e,p,h,n)}),s){const{fontFamily:p,fontSize:m,fontWeight:d,textAnchor:y}=h;e.font=`${d} ${m}px ${p}`,l!==void 0&&(e.fillStyle=l),e.textAlign=y==="middle"?"center":y,h.ticks.forEach(g=>{vu(e,g,h)})}r&&gu(e,this.props,c),e.restore()}}render(){const{bg:e,axisZoomCallback:n,className:r,zoomCursorClassName:i,zoomEnabled:s,getScale:o,inverted:a,transform:c,getMouseDelta:u,edgeClip:l,onContextMenu:f,onDoubleClick:h}=this.props,p=s?z.createElement(fu,{bg:e,getScale:o,getMoreProps:this.getMoreProps,getMouseDelta:u,axisZoomCallback:n,className:r,zoomCursorClassName:i,inverted:a,onContextMenu:f,onDoubleClick:h}):null;return z.createElement("g",{transform:`translate(${c[0]}, ${c[1]})`},p,z.createElement(nn,{ref:this.chartRef,canvasToDraw:Pc,clip:!1,edgeClip:l,canvasDraw:this.drawOnCanvas,drawOn:["pan"]}))}}sn.defaultProps={edgeClip:!1,zoomEnabled:!1,zoomCursorClassName:""};const pu=(t,e)=>{const{orient:n,innerTickSize:r=4,tickFormat:i,tickPadding:s=4,tickLabelFill:o,tickStrokeWidth:a,tickStrokeDasharray:c,fontSize:u=12,fontFamily:l,fontWeight:f,showTicks:h,showTickLabel:p,ticks:m,tickValues:d,tickStrokeStyle:y,tickInterval:g,tickIntervalFunction:x}=t,w=du(t,["orient","innerTickSize","tickFormat","tickPadding","tickLabelFill","tickStrokeWidth","tickStrokeDasharray","fontSize","fontFamily","fontWeight","showTicks","showTickLabel","ticks","tickValues","tickStrokeStyle","tickInterval","tickIntervalFunction"]);let b;if(d!==void 0)typeof d=="function"?b=d(e.domain()):b=d;else if(g!==void 0){const[T,M]=e.domain(),H=Tc(T,M,(M-T)/g);b=x?x(T,M,g):H}else e.ticks!==void 0?b=e.ticks(m):b=e.domain();const C=i===void 0?e.tickFormat(m):T=>i(T)||"",D=n==="top"||n==="left"?-1:1,N=Math.max(r,0)+s;let E,_,k,S;if(n==="bottom"||n==="top"){_=D<0?"0em":".71em",k=D<0?0:u*.71,S="middle";const T=D*r,M=D*N;if(E=b.map(H=>{const Z=Math.round(e(H));return{value:H,x1:Z,y1:0,x2:Z,y2:T,labelX:Z,labelY:M}}),h){const H=E.map(O=>({id:O.value,value:O.value,fy:O.y2,origX:O.x1})),Z=lu(H).force("x",hu(O=>O.origX).strength(1)).force("collide",Qc(22)).stop();for(let O=0;O<100;++O)Z.tick();E=Nc(E,H).map(O=>{const ct=O[0],nt=O[1];return Math.abs(nt.x-nt.origX)>.01?Object.assign(Object.assign({},ct),{x2:nt.x,labelX:nt.x}):ct})}}else E=b.map(T=>{const M=Math.round(e(T)),H=D*r,Z=D*N;return{value:T,x1:0,y1:M,x2:H,y2:M,labelX:Z,labelY:M}}),_=".32em",k=u*.32,S=D<0?"end":"start";return Object.assign({orient:n,ticks:E,scale:e,tickStrokeStyle:y,tickLabelFill:o||y,tickStrokeWidth:a,tickStrokeDasharray:c,dy:_,canvas_dy:k,textAnchor:S,fontSize:u,fontFamily:l,fontWeight:f,format:C,showTickLabel:p},w)},gu=(t,e,n)=>{const{orient:r,outerTickSize:i,strokeStyle:s,strokeWidth:o}=e,a=r==="top"||r==="left"?-1:1,c=r==="bottom"||r==="top";t.lineWidth=o,t.strokeStyle=s,t.beginPath();const u=Fe(n),l=U(n),f=a*i;c?(t.moveTo(u,f),t.lineTo(u,0),t.lineTo(l,0),t.lineTo(l,f)):(t.moveTo(f,u),t.lineTo(0,u),t.lineTo(0,l),t.lineTo(f,l)),t.stroke()},mu=(t,e)=>{const{ticks:n,tickStrokeStyle:r}=e;r!==void 0&&(t.strokeStyle=r,t.fillStyle=r),n.forEach(i=>{xu(t,i,e)})},yu=(t,e,n,r)=>{const{orient:i,gridLinesStrokeWidth:s,gridLinesStrokeStyle:o,gridLinesStrokeDasharray:a}=n,{chartConfig:c}=r,{height:u,width:l}=c;o!==void 0&&(t.strokeStyle=o),t.beginPath();const f=i==="top"||i==="left"?1:-1;switch(i){case"top":case"bottom":t.moveTo(e.x1,0),t.lineTo(e.x2,f*u);break;default:t.moveTo(0,e.y1),t.lineTo(f*l,e.y2);break}t.lineWidth=s;const h=mr(a);t.setLineDash(h),t.stroke()},xu=(t,e,n)=>{const{tickStrokeWidth:r,tickStrokeDasharray:i}=n;t.beginPath(),t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=r;const s=mr(i);t.setLineDash(s),t.stroke()},vu=(t,e,n)=>{const{canvas_dy:r,format:i}=n,s=i(e.value);t.beginPath(),t.fillText(s,e.labelX,e.labelY+r)};var Gn=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class ht extends z.Component{constructor(){super(...arguments),this.axisZoomCallback=e=>{const{xAxisZoom:n}=this.context;n&&n(e)},this.helper=()=>{const{axisAt:e,xZoomHeight:n=ht.defaultProps.xZoomHeight,orient:r,ticks:i}=this.props,{chartConfig:{width:s,height:o}}=this.context;let a;const c=0,u=s,l=n;switch(e){case"top":a=0;break;case"bottom":a=o;break;case"middle":a=o/2;break;default:a=e??o}const f=r==="top"?-n:0;return{transform:[0,a],range:[0,s],getScale:this.getXScale,bg:{x:c,y:f,h:l,w:u},ticks:i??this.getXTicks(s)}},this.getXTicks=e=>e<400?2:e<500?6:8,this.getXScale=e=>{const{xScale:n,width:r}=e;if(n.invert){const i=[0,r],s=i.map(n.invert);return n.copy().domain(s).range(i)}return n}}render(){const e=this.props,{getMouseDelta:n=ht.defaultProps.getMouseDelta,outerTickSize:r=ht.defaultProps.outerTickSize,showTicks:i,strokeStyle:s=ht.defaultProps.strokeStyle,strokeWidth:o=ht.defaultProps.strokeWidth,zoomEnabled:a}=e,c=Gn(e,["getMouseDelta","outerTickSize","showTicks","strokeStyle","strokeWidth","zoomEnabled"]),u=Gn(this.helper(),[]);return z.createElement(sn,Object.assign({},c,u,{getMouseDelta:n,outerTickSize:r,showTicks:i,strokeStyle:s,strokeWidth:o,zoomEnabled:a&&i,axisZoomCallback:this.axisZoomCallback}))}}ht.defaultProps={axisAt:"bottom",className:"react-financial-charts-x-axis",domainClassName:"react-financial-charts-axis-domain",fontFamily:"-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif",fontSize:12,fontWeight:400,getMouseDelta:(t,e)=>t[0]-e[0],gridLinesStrokeStyle:"#E2E4EC",gridLinesStrokeWidth:1,orient:"bottom",outerTickSize:0,innerTickSize:4,showDomain:!0,showGridLines:!1,showTicks:!0,showTickLabel:!0,strokeStyle:"#000000",strokeWidth:1,tickPadding:4,tickLabelFill:"#000000",tickStrokeStyle:"#000000",xZoomHeight:25,zoomEnabled:!0,zoomCursorClassName:"react-financial-charts-ew-resize-cursor"};ht.contextType=me;var Qn=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class ft extends z.Component{constructor(){super(...arguments),this.axisZoomCallback=e=>{const{chartId:n,yAxisZoom:r}=this.context;r&&n&&r(String(n),e)},this.helper=()=>{const{axisAt:e,ticks:n,yZoomWidth:r=ft.defaultProps.yZoomWidth,orient:i}=this.props,{chartConfig:{width:s,height:o}}=this.context;let a;const c=0,u=r,l=o;switch(e){case"left":a=0;break;case"right":a=s;break;case"middle":a=s/2;break;default:a=e??s}const f=i==="left"?-r:0;return{transform:[a,0],range:[0,o],getScale:this.getYScale,bg:{x:f,y:c,h:l,w:u},ticks:n??this.getYTicks(o),zoomEnabled:this.context.chartConfig.yPan}},this.getYTicks=e=>e<300?2:e<500?6:8,this.getYScale=e=>{const{yScale:n,flipYScale:r,height:i}=e.chartConfig;if(n.invert){const s=r?[0,i]:[i,0],o=s.map(n.invert);return n.copy().domain(o).range(s)}return n}}render(){const e=this.props,{getMouseDelta:n=ft.defaultProps.getMouseDelta,outerTickSize:r=ft.defaultProps.outerTickSize,strokeStyle:i=ft.defaultProps.strokeStyle,strokeWidth:s=ft.defaultProps.strokeWidth}=e,o=Qn(e,["getMouseDelta","outerTickSize","strokeStyle","strokeWidth"]),a=this.helper(),{zoomEnabled:c}=a,u=Qn(a,["zoomEnabled"]);return z.createElement(sn,Object.assign({},o,u,{edgeClip:!0,getMouseDelta:n,outerTickSize:r,strokeStyle:i,strokeWidth:s,zoomEnabled:this.props.zoomEnabled&&c,axisZoomCallback:this.axisZoomCallback}))}}ft.defaultProps={axisAt:"right",className:"react-financial-charts-y-axis",domainClassName:"react-financial-charts-axis-domain",fontFamily:"-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif",fontSize:12,fontWeight:400,getMouseDelta:(t,e)=>t[1]-e[1],gridLinesStrokeStyle:"#E2E4EC",gridLinesStrokeWidth:1,innerTickSize:4,outerTickSize:0,orient:"right",showDomain:!0,showGridLines:!1,showTicks:!0,showTickLabel:!0,strokeStyle:"#000000",strokeWidth:1,tickPadding:4,tickLabelFill:"#000000",tickStrokeStyle:"#000000",yZoomWidth:40,zoomEnabled:!0,zoomCursorClassName:"react-financial-charts-ns-resize-cursor"};ft.contextType=me;const Au=()=>t=>class extends Ee.Component{constructor(){super(...arguments);an(this,"ref",Ee.createRef())}componentDidMount(){const{current:r}=this.ref;if(r===null){this.setState({ratio:1});return}const i=r.getContext("2d"),{devicePixelRatio:s}=window,o=i.webkitBackingStorePixelRatio??i.mozBackingStorePixelRatio??i.msBackingStorePixelRatio??i.oBackingStorePixelRatio??i.backingStorePixelRatio??1;this.setState({ratio:s/o})}render(){const r=this.state;return r!==null?L.jsx(t,{...this.props,ratio:r.ratio}):L.jsx("canvas",{ref:this.ref})}};let tt;typeof window<"u"?tt=window:typeof self<"u"?tt=self:tt=global;let Ye=null,$e=null;const Jn=20,ke=tt.clearTimeout,Kn=tt.setTimeout,Te=tt.cancelAnimationFrame||tt.mozCancelAnimationFrame||tt.webkitCancelAnimationFrame,tr=tt.requestAnimationFrame||tt.mozRequestAnimationFrame||tt.webkitRequestAnimationFrame;Te==null||tr==null?(Ye=ke,$e=function(e){return Kn(e,Jn)}):(Ye=function([e,n]){Te(e),ke(n)},$e=function(e){const n=tr(function(){ke(r),e()}),r=Kn(function(){Te(n),e()},Jn);return[n,r]});function wu(t){let e,n,r,i,s,o,a;const c=typeof document<"u"&&document.attachEvent;if(!c){o=function(g){const x=g.__resizeTriggers__,w=x.firstElementChild,b=x.lastElementChild,C=w.firstElementChild;b.scrollLeft=b.scrollWidth,b.scrollTop=b.scrollHeight,C.style.width=w.offsetWidth+1+"px",C.style.height=w.offsetHeight+1+"px",w.scrollLeft=w.scrollWidth,w.scrollTop=w.scrollHeight},s=function(g){return g.offsetWidth!==g.__resizeLast__.width||g.offsetHeight!==g.__resizeLast__.height},a=function(g){if(g.target.className&&typeof g.target.className.indexOf=="function"&&g.target.className.indexOf("contract-trigger")<0&&g.target.className.indexOf("expand-trigger")<0)return;const x=this;o(this),this.__resizeRAF__&&Ye(this.__resizeRAF__),this.__resizeRAF__=$e(function(){s(x)&&(x.__resizeLast__.width=x.offsetWidth,x.__resizeLast__.height=x.offsetHeight,x.__resizeListeners__.forEach(function(C){C.call(x,g)}))})};let h=!1,p="";r="animationstart";const m="Webkit Moz O ms".split(" ");let d="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),y="";{const g=document.createElement("fakeelement");if(g.style.animationName!==void 0&&(h=!0),h===!1){for(let x=0;x<m.length;x++)if(g.style[m[x]+"AnimationName"]!==void 0){y=m[x],p="-"+y.toLowerCase()+"-",r=d[x],h=!0;break}}}n="resizeanim",e="@"+p+"keyframes "+n+" { from { opacity: 0; } to { opacity: 0; } } ",i=p+"animation: 1ms "+n+"; "}const u=function(h){if(!h.getElementById("detectElementResize")){const p=(e||"")+".resize-triggers { "+(i||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',m=h.head||h.getElementsByTagName("head")[0],d=h.createElement("style");d.id="detectElementResize",d.type="text/css",t!=null&&d.setAttribute("nonce",t),d.styleSheet?d.styleSheet.cssText=p:d.appendChild(h.createTextNode(p)),m.appendChild(d)}};return{addResizeListener:function(h,p){if(c)h.attachEvent("onresize",p);else{if(!h.__resizeTriggers__){const m=h.ownerDocument,d=tt.getComputedStyle(h);d&&d.position==="static"&&(h.style.position="relative"),u(m),h.__resizeLast__={},h.__resizeListeners__=[],(h.__resizeTriggers__=m.createElement("div")).className="resize-triggers";const y=m.createElement("div");y.className="expand-trigger",y.appendChild(m.createElement("div"));const g=m.createElement("div");g.className="contract-trigger",h.__resizeTriggers__.appendChild(y),h.__resizeTriggers__.appendChild(g),h.appendChild(h.__resizeTriggers__),o(h),h.addEventListener("scroll",a,!0),r&&(h.__resizeTriggers__.__animationListener__=function(w){w.animationName===n&&o(h)},h.__resizeTriggers__.addEventListener(r,h.__resizeTriggers__.__animationListener__))}h.__resizeListeners__.push(p)}},removeResizeListener:function(h,p){if(c)h.detachEvent("onresize",p);else if(h.__resizeListeners__.splice(h.__resizeListeners__.indexOf(p),1),!h.__resizeListeners__.length){h.removeEventListener("scroll",a,!0),h.__resizeTriggers__.__animationListener__&&(h.__resizeTriggers__.removeEventListener(r,h.__resizeTriggers__.__animationListener__),h.__resizeTriggers__.__animationListener__=null);try{h.__resizeTriggers__=!h.removeChild(h.__resizeTriggers__)}catch{}}}}}class bu extends z.Component{constructor(...e){super(...e),this.state={height:this.props.defaultHeight||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._didLogDeprecationWarning=!1,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:n,disableWidth:r,onResize:i}=this.props;if(this._parentNode){const s=window.getComputedStyle(this._parentNode)||{},o=parseFloat(s.paddingLeft||"0"),a=parseFloat(s.paddingRight||"0"),c=parseFloat(s.paddingTop||"0"),u=parseFloat(s.paddingBottom||"0"),l=this._parentNode.getBoundingClientRect(),f=l.height-c-u,h=l.width-o-a;if(!n&&this.state.height!==f||!r&&this.state.width!==h){this.setState({height:f,width:h});const p=()=>{this._didLogDeprecationWarning||(this._didLogDeprecationWarning=!0,console.warn("scaledWidth and scaledHeight parameters have been deprecated; use width and height instead"))};typeof i=="function"&&i({height:f,width:h,get scaledHeight(){return p(),f},get scaledWidth(){return p(),h}})}}},this._setRef=n=>{this._autoSizer=n}}componentDidMount(){const{nonce:e}=this.props,n=this._autoSizer?this._autoSizer.parentNode:null;if(n!=null&&n.ownerDocument&&n.ownerDocument.defaultView&&n instanceof n.ownerDocument.defaultView.HTMLElement){this._parentNode=n;const r=n.ownerDocument.defaultView.ResizeObserver;r!=null?(this._resizeObserver=new r(()=>{this._timeoutId=setTimeout(this._onResize,0)}),this._resizeObserver.observe(n)):(this._detectElementResize=wu(e),this._detectElementResize.addResizeListener(n,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),this._timeoutId!==null&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:e,defaultHeight:n,defaultWidth:r,disableHeight:i=!1,disableWidth:s=!1,doNotBailOutOnEmptyChildren:o=!1,nonce:a,onResize:c,style:u={},tagName:l="div",...f}=this.props,{height:h,width:p}=this.state,m={overflow:"visible"},d={};let y=!1;return i||(h===0&&(y=!0),m.height=0,d.height=h,d.scaledHeight=h),s||(p===0&&(y=!0),m.width=0,d.width=p,d.scaledWidth=p),o&&(y=!1),z.createElement(l,{ref:this._setRef,style:{...m,...u},...f},!y&&e(d))}}const Iu=t=>e=>class extends Ee.Component{render(){return L.jsx(bu,{children:({height:r,width:i})=>L.jsx(e,{...this.props,height:r,width:i})})}};export{wr as $,Is as A,je as B,en as C,or as D,vt as E,mt as F,nn as G,W as H,X as I,ot as J,Pt as K,kc as L,J as M,ee as N,Ut as O,Ht as P,Mt as Q,Tc as R,lu as S,St as T,hu as U,Qc as V,Nc as W,ht as X,ft as Y,me as Z,Du as _,nr as a,zs as a0,Fs as a1,ut as a2,gi as a3,Xe as a4,mi as a5,cr as a6,Qt as a7,ir as a8,Pu as a9,Mu as aa,Ei as ab,Be as ac,sr as ad,xt as ae,vo as af,qe as ag,So as ah,pr as ai,Hn as aj,gr as ak,Eo as al,Tu as am,Pc as b,Ve as c,mr as d,ye as e,Xt as f,Eu as g,Y as h,Zt as i,Fe as j,ze as k,U as l,Au as m,st as n,Sc as o,K as p,fe as q,ku as r,Ns as s,As as t,Us as u,xo as v,Iu as w,yo as x,Ti as y,oe as z};
